<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Estudio Tech</title>
<style>
  * { margin:0; padding:0; box-sizing:border-box; }
  body {
    font-family: Arial, sans-serif;
    background-color: #f5f7fa;
    color: #333;
  }
  header {
    background: linear-gradient(90deg,#004aad,#0070f3);
    color: white;
    padding: 1rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .menu-btn {
    font-size: 1.8rem;
    cursor: pointer;
  }
  h1 { font-size: 1.5rem; }
  /* Sidebar */
  .sidebar {
    height: 100%;
    width: 0;
    position: fixed;
    top: 0; left: 0;
    background-color: #003080;
    overflow-x: hidden;
    transition: 0.3s;
    padding-top: 60px;
    z-index: 1000;
  }
  .sidebar a, .sidebar label {
    padding: 10px 20px;
    display: block;
    text-decoration: none;
    font-size: 1rem;
    color: white;
    transition: 0.2s;
    cursor: pointer;
  }
  .sidebar a:hover, .sidebar label:hover {
    background-color: #004aad;
  }
  .close-btn {
    position: absolute;
    top: 10px; right: 20px;
    font-size: 1.5rem;
    cursor: pointer;
    color: white;
  }
  /* Filtros */
  .filter-section {
    padding: 10px 20px;
    color: white;
  }
  .filter-section input {
    width: 90%;
    padding: 5px;
    margin: 5px 0;
    border-radius: 4px;
    border: none;
  }
  /* Grid productos */
  main { padding: 1rem; }
  .products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 1rem;
  }
  .product-card {
    background-color: white;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    cursor: pointer;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    opacity: 0;
    transform: translateY(20px);
  }
  .product-card.visible {
    opacity: 1;
    transform: translateY(0);
  }
  .product-card:hover {
    transform: scale(1.03);
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  }
  .product-card img {
    width: 100%;
    height: 150px;
    object-fit: cover;
  }
  .product-card .info {
    padding: 0.7rem;
  }
  .product-card .info h4 {
    font-size: 1rem;
    margin-bottom: 0.3rem;
  }
  .product-card .info p {
    color: #0070f3;
    font-weight: bold;
  }
  /* Modal */
  .modal {
    display: none;
    position: fixed;
    z-index: 2000;
    padding-top: 50px;
    left: 0; top: 0;
    width: 100%; height: 100%;
    background-color: rgba(0,0,0,0.6);
    animation: fadeIn 0.3s ease;
  }
  @keyframes fadeIn { from {opacity:0} to {opacity:1} }
  .modal-content {
    background-color: #fff;
    margin: auto;
    padding: 20px;
    border-radius: 8px;
    max-width: 600px;
    position: relative;
    animation: slideUp 0.3s ease;
  }
  @keyframes slideUp { from {transform: translateY(50px);} to {transform: translateY(0);} }
  .modal-close {
    position: absolute;
    right: 15px; top: 10px;
    font-size: 1.5rem;
    cursor: pointer;
  }
  .comments-section { margin-top: 1rem; }
  .comment {
    background: #f0f4ff;
    padding: 8px;
    border-radius: 4px;
    margin-bottom: 5px;
  }
  .buy-btn {
    display: inline-block;
    padding: 10px 15px;
    background-color: #0070f3;
    color: white;
    border-radius: 4px;
    text-decoration: none;
    margin-top: 10px;
  }
  .buy-btn:hover {
    background-color: #0057b8;
  }
  form input, form textarea {
    width: 100%;
    padding: 6px;
    margin: 5px 0;
    border-radius: 4px;
    border: 1px solid #ccc;
  }
  form button {
    background-color: #004aad;
    color: white;
    padding: 7px 12px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }
  form button:hover { background-color: #002f6c; }
</style>
</head>
<body>
<header>
  <span class="menu-btn" onclick="openMenu()">☰</span>
  <h1>Estudio Tech</h1>
</header>

<div id="sidebar" class="sidebar">
  <span class="close-btn" onclick="closeMenu()">×</span>
  <a onclick="setCategory('all')">Todos</a>
  <a onclick="setCategory('portatiles')">Portátiles</a>
  <a onclick="setCategory('moviles')">Móviles</a>
  <a onclick="setCategory('auriculares')">Auriculares</a>
  <a onclick="setCategory('accesorios')">Accesorios</a>

  <div class="filter-section">
    <label>Precio mín:</label>
    <input type="number" id="minPrice" placeholder="€" />
    <label>Precio máx:</label>
    <input type="number" id="maxPrice" placeholder="€" />
  </div>

  <div class="filter-section">
    <label>Buscar producto:</label>
    <input type="text" id="searchText" placeholder="Escribe un nombre" />
  </div>
</div>

<main>
  <div class="products-grid" id="productsGrid"></div>
</main>

<!-- Modal -->
<div id="productModal" class="modal">
  <div class="modal-content">
    <span class="modal-close" onclick="closeModal()">×</span>
    <h2 id="modalTitle"></h2>
    <img id="modalImage" src="" alt="" style="width:100%;max-height:250px;object-fit:cover;" />
    <p id="modalDescription"></p>
    <a id="modalLink" href="#" target="_blank" class="buy-btn">Comprar</a>
    <div class="comments-section">
      <h3>Comentarios</h3>
      <div id="commentsList"></div>
      <form id="commentForm">
        <input type="text" id="commentName" placeholder="Tu nombre" required />
        <textarea id="commentText" placeholder="Tu comentario" required></textarea>
        <button type="submit">Enviar</button>
      </form>
    </div>
  </div>
</div>

<script>
const products = [
  {id:1,name:"Lenovo IdeaPad 3",price:599,category:"portatiles",image:"https://img.pccomponentes.com/articles/1006/10064372/1006-lenovo-ideapad-3-15itl6-intel-core-i5-1135g7-8gb-512gb-ssd-156.jpg",description:"Intel i5, 8GB RAM, 512GB SSD. Ideal para estudiantes que buscan equilibrio.",link:"https://www.pccomponentes.com/lenovo-ideapad-3"},
  {id:2,name:"MacBook Air M1",price:1099,category:"portatiles",image:"https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/mb-air-spacegray-select-202011?wid=452&hei=420&fmt=jpeg&qlt=95&.v=1603332211000",description:"Chip M1, 8GB RAM, 256GB SSD. Rendimiento y autonomía excepcionales.",link:"https://www.apple.com/es/macbook-air-m1/"},
  {id:3,name:"iPhone 14",price:999,category:"moviles",image:"https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/iphone-14-blue-select-202209?wid=940&hei=1112&fmt=png-alpha&.v=1663703842785",description:"Pantalla 6.1\", A15 Bionic, cámara avanzada. Ideal para ecosistema Apple.",link:"https://www.apple.com/es/iphone-14/"},
  {id:4,name:"Samsung Galaxy S22",price:849,category:"moviles",image:"https://images.samsung.com/is/image/samsung/p6pim/es/2202/gallery/es-galaxy-s22-s901-sm-s901bzkdeub-530682271?$650_519_PNG$",description:"Pantalla 6.1\", Exynos 2200, cámara triple. Android potente y versátil.",link:"https://www.samsung.com/es/smartphones/galaxy-s22/"},
  {id:5,name:"Sony WH-1000XM4",price:279,category:"auriculares",image:"https://www.sony.es/image/93bbce75e54b89c8f7e60d8cb5c4c881?fmt=pjpeg&wid=330&bgcolor=FFFFFF&bgc=FFFFFF",description:"Cancelación activa de ruido y 30 horas de batería. Perfectos para concentración.",link:"https://www.sony.es/electronics/auriculares-diademas/wh-1000xm4"},
  {id:6,name:"Apple AirPods Pro",price:249,category:"auriculares",image:"https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/airpods-pro-2nd-gen-select-202209?wid=940&hei=1112&fmt=png-alpha&.v=1660803965869",description:"Cancelación activa, modo transparencia, integración perfecta con Apple.",link:"https://www.apple.com/es/airpods-pro/"},
  {id:7,name:"Logitech MX Master 3",price:99,category:"accesorios",image:"https://resource.logitech.com/w_800,c_limit,q_auto,f_auto,dpr_2.0/d_transparent.gif/content/dam/logitech/en/products/mice/mx-master-3/gallery/mx-master-3-top-view-graphite.png?v=1",description:"Ratón ergonómico y preciso. Perfecto para largas jornadas de estudio o trabajo.",link:"https://www.logitech.com/es-es/products/mice/mx-master-3.html"},
  {id:8,name:"Teclado Logitech K380",price:39,category:"accesorios",image:"https://resource.logitech.com/w_800,c_limit,q_auto,f_auto,dpr_2.0/d_transparent.gif/content/dam/logitech/en/products/keyboards/k380/gallery/k380-keyboard-top-view-rose-gallery.png?v=1",description:"Teclado Bluetooth compacto multi-dispositivo.",link:"https://www.logitech.com/es-es/products/keyboards/k380.html"}
];

const commentsData = {};
let currentCategory = "all";
let currentMinPrice = 0;
let currentMaxPrice = Infinity;
let currentSearchText = "";

// Menú
function openMenu() {
  document.getElementById("sidebar").style.width = "260px";
}
function closeMenu() {
  document.getElementById("sidebar").style.width = "0";
}

// Set categoría
function setCategory(cat) {
  currentCategory = cat;
  applyFilters();
  closeMenu();
}

// Aplicar filtros
function applyFilters() {
  currentMinPrice = parseFloat(document.getElementById("minPrice").value) || 0;
  currentMaxPrice = parseFloat(document.getElementById("maxPrice").value) || Infinity;
  currentSearchText = document.getElementById("searchText").value.toLowerCase().trim();

  const grid = document.getElementById("productsGrid");
  grid.innerHTML = "";

  const filtered = products.filter(p => {
    const inCategory = (currentCategory === "all" || p.category === currentCategory);
    const inPrice = (p.price >= currentMinPrice && p.price <= currentMaxPrice);
    const inSearch = p.name.toLowerCase().includes(currentSearchText);
    return inCategory && inPrice && inSearch;
  });

  filtered.forEach((prod, index) => {
    const card = document.createElement("div");
    card.classList.add("product-card");
    setTimeout(() => card.classList.add("visible"), index * 100);
    card.innerHTML = `
      <img src="${prod.image}" alt="${prod.name}" />
      <div class="info">
        <h4>${prod.name}</h4>
        <p>${prod.price} €</p>
      </div>
    `;
    card.addEventListener("click", () => openProduct(prod.id));
    grid.appendChild(card);
  });
}

// Búsqueda en tiempo real
document.getElementById("searchText").addEventListener("input", applyFilters);
document.getElementById("minPrice").addEventListener("input", applyFilters);
document.getElementById("maxPrice").addEventListener("input", applyFilters);

// Modal producto
function openProduct(id) {
  const prod = products.find(p => p.id === id);
  document.getElementById("modalTitle").textContent = prod.name;
  document.getElementById("modalImage").src = prod.image;
  document.getElementById("modalDescription").textContent = prod.description;
  document.getElementById("modalLink").href = prod.link;

  const commentsList = document.getElementById("commentsList");
  commentsList.innerHTML = "";
  if (commentsData[id]) {
    commentsData[id].forEach(c => {
      const div = document.createElement("div");
      div.classList.add("comment");
      div.textContent = `${c.name}: ${c.text}`;
      commentsList.appendChild(div);
    });
  }

  document.getElementById("commentForm").dataset.productId = id;
  document.getElementById("productModal").style.display = "block";
}

function closeModal() {
  document.getElementById("productModal").style.display = "none";
}

// Comentarios
document.getElementById("commentForm").addEventListener("submit", function(e) {
  e.preventDefault();
  const id = this.dataset.productId;
  const name = document.getElementById("commentName").value.trim();
  const text = document.getElementById("commentText").value.trim();
  if (!name || !text) return;
  if (!commentsData[id]) commentsData[id] = [];
  commentsData[id].push({ name, text });
  document.getElementById("commentName").value = "";
  document.getElementById("commentText").value = "";
  openProduct(parseInt(id));
});

// Cerrar modal clic fuera
window.onclick = function(event) {
  if (event.target === document.getElementById("productModal")) {
    closeModal();
  }
};

// Iniciar con todos los productos
applyFilters();
</script>
</body>
</html>