<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MCHVBL7Z');</script>
<!-- End Google Tag Manager -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Estudio Tech | Asesoría en Tecnología para Estudiantes y Profesionales</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- Variables CSS y Reset --- */
        :root {
            --primary-color: #2563eb;
            --primary-hover: #1d4ed8;
            --secondary-color: #1e293b;
            --background-color: #f8fafc;
            --card-bg-color: #ffffff;
            --text-color: #334155;
            --light-text-color: #64748b;
            --border-color: #e2e8f0;
            --shadow-light: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-medium: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-hover: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --sidebar-width: 320px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            overflow-x: hidden;
        }

        a { 
            text-decoration: none; 
            color: var(--primary-color); 
            transition: var(--transition); 
        }
        a:hover { 
            color: var(--primary-hover); 
        }

        /* --- Cookies y Política de Privacidad --- */
        .cookie-consent {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--secondary-color);
            color: white;
            padding: 1.5rem;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            z-index: 2000;
            box-shadow: 0 -5px 15px rgba(0,0,0,0.1);
        }
        
        .cookie-consent p {
            flex: 1;
            min-width: 250px;
            margin-right: 1rem;
            margin-bottom: 1rem;
        }
        
        .cookie-actions {
            display: flex;
            gap: 1rem;
        }
        
        .cookie-btn {
            padding: 0.5rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .cookie-accept {
            background-color: var(--primary-color);
            color: white;
            border: none;
        }
        
        .cookie-reject {
            background: none;
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
        }
        
        .cookie-accept:hover {
            background-color: var(--primary-hover);
        }
        
        .cookie-reject:hover {
            background-color: rgba(255,255,255,0.1);
        }

        /* --- Header y Navegación --- */
        header {
            background: var(--card-bg-color);
            padding: 1.5rem 3rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: var(--shadow-light);
            position: sticky;
            top: 0;
            z-index: 1000;
            transition: var(--transition);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        header h1 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--secondary-color);
            cursor: pointer;
            transition: var(--transition);
        }
        header h1:hover {
            color: var(--primary-color);
        }

        .main-nav {
            display: flex;
            gap: 2.5rem;
        }

        .main-nav a, .dropdown-btn {
            font-weight: 600;
            color: var(--text-color);
            padding: 0.5rem 0;
            position: relative;
            transition: var(--transition);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .main-nav a:hover, .main-nav a.active, .dropdown-btn:hover {
            color: var(--primary-color);
        }

        .main-nav a::after, .dropdown-btn::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: -5px;
            width: 0;
            height: 3px;
            background-color: var(--primary-color);
            transition: var(--transition);
        }

        .main-nav a:hover::after, .main-nav a.active::after, .dropdown-btn:hover::after {
            width: 100%;
        }
        
        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: var(--card-bg-color);
            min-width: 250px;
            box-shadow: var(--shadow-medium);
            z-index: 1;
            border-radius: 0.5rem;
            padding: 0.5rem 0;
            top: 100%;
            left: 0;
            animation: fadeIn 0.3s ease forwards;
            opacity: 0;
            transform: translateY(10px);
        }

        .dropdown-content a {
            color: var(--text-color);
            padding: 0.75rem 1.5rem;
            text-decoration: none;
            display: block;
            font-weight: 500;
            transition: var(--transition);
        }

        .dropdown-content a:hover {
            background-color: var(--background-color);
            color: var(--primary-color);
            padding-left: 1.75rem;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        /* --- Sidebar y Filtros --- */
        .menu-btn {
            font-size: 1.75rem;
            cursor: pointer;
            color: var(--text-color);
            transition: var(--transition);
        }
        .menu-btn:hover {
            color: var(--primary-color);
            transform: scale(1.1);
        }

        .sidebar {
            height: 100%;
            width: 0;
            position: fixed;
            top: 0; 
            left: 0;
            background-color: var(--secondary-color);
            overflow-x: hidden;
            transition: var(--transition);
            padding-top: 5rem;
            z-index: 1001;
            box-shadow: 2px 0 10px rgba(0,0,0,0.2);
            color: white;
            display: flex;
            flex-direction: column;
        }

        .sidebar.open {
            width: var(--sidebar-width);
        }

        .sidebar .close-btn {
            position: absolute;
            top: 1.5rem; 
            right: 1.5rem;
            font-size: 2rem;
            cursor: pointer;
            color: white;
            transition: var(--transition);
        }
        .sidebar .close-btn:hover {
            color: var(--primary-color);
            transform: rotate(90deg);
        }

        .sidebar h3 {
            font-size: 1.25rem;
            font-weight: 600;
            padding: 1rem 2rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        .sidebar h3 i {
            font-size: 1.1rem;
        }

        .sidebar a, .sidebar label {
            padding: 0.75rem 2rem;
            display: block;
            text-decoration: none;
            font-size: 1.05rem;
            color: rgba(255,255,255,0.9);
            transition: var(--transition);
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        .sidebar a i, .sidebar label i {
            width: 1.25rem;
            text-align: center;
        }

        .sidebar a:hover, .sidebar label:hover {
            background-color: rgba(255,255,255,0.1);
            color: white;
            padding-left: 2.25rem;
        }

        .filter-section {
            padding: 1.25rem 2rem;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .filter-section label {
            display: block;
            padding: 0;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: rgba(255,255,255,0.8);
        }

        .filter-section input, .filter-section select {
            width: 100%;
            padding: 0.75rem;
            margin-bottom: 1rem;
            border-radius: 0.5rem;
            border: none;
            font-size: 1rem;
            background-color: rgba(255,255,255,0.1);
            color: white;
            transition: var(--transition);
        }
        .filter-section input:focus, .filter-section select:focus {
            outline: none;
            background-color: rgba(255,255,255,0.2);
            box-shadow: 0 0 0 2px var(--primary-color);
        }

        .filter-section input::placeholder {
            color: rgba(255,255,255,0.5);
        }

        .filter-section button {
            width: 100%;
            padding: 0.75rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        .filter-section button:hover {
            background-color: var(--primary-hover);
            transform: translateY(-2px);
        }

        /* --- Contenedor Principal y Secciones --- */
        main {
            max-width: 1400px;
            margin: 0 auto;
            padding: 3rem;
            transition: var(--transition);
        }

        .hero-section {
            text-align: center;
            padding: 6rem 2rem;
            background: linear-gradient(135deg, var(--card-bg-color), #eef5ff);
            border-radius: 1.25rem;
            box-shadow: var(--shadow-light);
            margin-bottom: 3rem;
            position: relative;
            overflow: hidden;
        }
        .hero-section::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 200%;
            background: radial-gradient(circle, rgba(37, 99, 235, 0.1) 0%, rgba(255,255,255,0) 70%);
            z-index: 0;
        }
        .hero-section > * {
            position: relative;
            z-index: 1;
        }

        .hero-section h2 {
            font-size: 3rem;
            font-weight: 800;
            color: var(--secondary-color);
            margin-bottom: 1.5rem;
            letter-spacing: -1px;
            line-height: 1.2;
        }

        .hero-section p {
            font-size: 1.2rem;
            color: var(--light-text-color);
            max-width: 900px;
            margin: 0 auto 3rem auto;
            line-height: 1.8;
        }

        .profile-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 3rem;
        }

        .profile-card {
            background-color: var(--card-bg-color);
            border-radius: 0.75rem;
            padding: 2rem;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-light);
            border: 1px solid rgba(0,0,0,0.05);
        }
        .profile-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(37, 99, 235, 0) 0%, rgba(37, 99, 235, 0.05) 100%);
            z-index: 0;
            transition: var(--transition);
        }
        .profile-card > * {
            position: relative;
            z-index: 1;
        }

        .profile-card:hover, .profile-card.active {
            transform: translateY(-8px) scale(1.03);
            box-shadow: var(--shadow-hover);
        }
        .profile-card:hover::before, .profile-card.active::before {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.1) 0%, rgba(37, 99, 235, 0.15) 100%);
        }

        .profile-card.active {
            background-color: var(--primary-color);
            color: white;
            box-shadow: 0 12px 25px rgba(37, 99, 235, 0.3);
        }
        .profile-card.active h3 {
            color: white;
        }

        .profile-card h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--secondary-color);
            transition: var(--transition);
            margin-bottom: 0.5rem;
        }

        .profile-card p {
            font-size: 0.9rem;
            color: var(--light-text-color);
            transition: var(--transition);
        }
        .profile-card.active p {
            color: rgba(255,255,255,0.8);
        }

        /* --- Secciones de Productos con Acordeón --- */
        .product-section {
            margin-bottom: 4rem;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: var(--shadow-light);
            background-color: var(--card-bg-color);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 2rem;
            cursor: pointer;
            transition: var(--transition);
        }
        .section-header:hover {
            background-color: rgba(0,0,0,0.02);
        }

        .product-section h2 {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--secondary-color);
            margin: 0;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        .product-section h2 i {
            font-size: 1.25rem;
            transition: var(--transition);
        }

        .section-toggle {
            font-size: 1.5rem;
            transition: var(--transition);
        }
        .section-header.active .section-toggle {
            transform: rotate(180deg);
        }

        .products-container {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .section-header.active + .products-container {
            max-height: 5000px;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
            padding: 0 2rem 2rem;
        }

        /* --- Tarjetas de Producto --- */
        .product-card {
            background-color: var(--card-bg-color);
            border-radius: 0.75rem;
            overflow: hidden;
            box-shadow: var(--shadow-light);
            cursor: pointer;
            transition: var(--transition);
            animation: fadeIn 0.8s ease forwards;
            opacity: 0;
            transform: translateY(20px);
            position: relative;
            border: 1px solid rgba(0,0,0,0.05);
        }
        .product-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: var(--shadow-hover);
        }

        .product-card .compare-checkbox {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 1.25rem;
            height: 1.25rem;
            z-index: 2;
            cursor: pointer;
        }

        .product-card img {
            width: 100%;
            height: 220px;
            object-fit: contain;
            display: block;
            padding: 1.5rem;
            background-color: var(--background-color);
            transition: var(--transition);
        }
        .product-card:hover img {
            transform: scale(1.05);
        }

        .product-card .info {
            padding: 1.5rem;
        }

        .product-card .info h4 {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--secondary-color);
            margin-bottom: 0.5rem;
            line-height: 1.3;
        }

        .product-card .info .price {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .product-card .info .rating {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            color: #f59e0b;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .product-card .info .category {
            display: inline-block;
            background-color: var(--background-color);
            color: var(--light-text-color);
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
            margin-top: 0.5rem;
        }

        /* --- Comparador de Productos --- */
        .compare-bar {
            position: fixed;
            bottom: -100px;
            left: 0;
            right: 0;
            background-color: var(--secondary-color);
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 -5px 15px rgba(0,0,0,0.1);
            z-index: 999;
            transition: var(--transition);
        }
        .compare-bar.visible {
            bottom: 0;
        }

        .compare-items {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .compare-item {
            background-color: rgba(255,255,255,0.1);
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }
        .compare-item button {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .compare-actions {
            display: flex;
            gap: 1rem;
        }

        .compare-actions button {
            padding: 0.5rem 1.5rem;
            border-radius: 9999px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .compare-clear {
            background: none;
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
        }
        .compare-clear:hover {
            background-color: rgba(255,255,255,0.1);
        }

        .compare-button {
            background-color: var(--primary-color);
            border: 1px solid var(--primary-color);
            color: white;
        }
        .compare-button:hover {
            background-color: var(--primary-hover);
        }
        .compare-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* --- Modal de Detalles del Producto --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0; 
            top: 0;
            width: 100%; 
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            animation: fadeIn 0.3s ease;
            overflow-y: auto;
            padding: 2rem 0;
        }

        .modal-content {
            background-color: var(--card-bg-color);
            margin: auto;
            padding: 2.5rem;
            border-radius: 1.25rem;
            max-width: 900px;
            position: relative;
            animation: slideUp 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 2.5rem;
            box-shadow: var(--shadow-hover);
        }

        .modal-close {
            position: absolute;
            right: 1.5rem; 
            top: 1.5rem;
            font-size: 2rem;
            cursor: pointer;
            color: var(--light-text-color);
            transition: var(--transition);
        }
        .modal-close:hover { 
            color: var(--text-color); 
            transform: rotate(90deg); 
        }

        .modal-image-container {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--background-color);
            border-radius: 0.75rem;
            overflow: hidden;
            height: fit-content;
        }

        .modal-image {
            width: 100%;
            max-height: 400px;
            object-fit: contain;
            border-radius: 0.75rem;
            transition: var(--transition);
        }
        .modal-image:hover {
            transform: scale(1.05);
        }

        .modal-details h2 {
            font-size: 2rem; 
            color: var(--secondary-color); 
            margin-bottom: 1rem;
            line-height: 1.3;
        }

        .modal-details .price {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
        }

        .modal-details p { 
            color: var(--light-text-color); 
            margin-bottom: 1.5rem; 
            line-height: 1.7;
        }

        .modal-details h3 { 
            font-size: 1.5rem; 
            color: var(--secondary-color); 
            margin-top: 1.5rem; 
            margin-bottom: 1rem; 
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        .modal-details h3 i {
            font-size: 1.1rem;
            color: var(--primary-color);
        }

        .modal-details ul { 
            list-style: none; 
            padding-left: 0; 
            margin-bottom: 1.5rem;
        }

        .modal-details li {
            background-color: var(--background-color);
            padding: 0.75rem;
            border-radius: 0.5rem;
            margin-bottom: 0.75rem;
            font-size: 1rem;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            line-height: 1.6;
        }

        .modal-details li::before {
            content: '✓';
            color: var(--primary-color);
            font-weight: bold;
            margin-top: 0.1rem;
        }

        .pros-cons-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .pros-list, .cons-list {
            list-style: none;
            padding: 0;
        }

        .pros-list li, .cons-list li {
            font-size: 1rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            line-height: 1.6;
        }

        .pros-list li::before {
            content: '✓';
            color: #10b981;
            font-weight: bold;
            margin-top: 0.1rem;
        }

        .cons-list li::before {
            content: '✕';
            color: #ef4444;
            font-weight: bold;
            margin-top: 0.1rem;
        }

        .pros-list h4, .cons-list h4 {
            font-size: 1.25rem;
            color: var(--secondary-color);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        .pros-list h4 i {
            color: #10b981;
        }
        .cons-list h4 i {
            color: #ef4444;
        }
        
        /* --- Valoraciones y Comentarios --- */
        .comments-section {
            grid-column: 1 / span 2;
            margin-top: 2rem;
            border-top: 1px solid var(--border-color);
            padding-top: 2rem;
        }

        .comments-section h3 {
            font-size: 1.75rem;
            color: var(--secondary-color);
            margin-bottom: 1.5rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        .comments-section h3 i {
            font-size: 1.25rem;
            color: var(--primary-color);
        }

        .rating-overview {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .average-rating {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: var(--background-color);
            padding: 1.5rem;
            border-radius: 0.75rem;
            min-width: 120px;
        }

        .average-rating-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--secondary-color);
            line-height: 1;
        }

        .average-rating-stars {
            color: #f59e0b;
            font-size: 1.5rem;
            margin: 0.5rem 0;
        }

        .average-rating-count {
            font-size: 0.9rem;
            color: var(--light-text-color);
        }

        .rating-distribution {
            flex: 1;
            min-width: 250px;
        }

        .rating-bar {
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .rating-label {
            width: 80px;
            font-size: 0.9rem;
            color: var(--light-text-color);
        }

        .rating-bar-container {
            flex: 1;
            height: 8px;
            background-color: var(--border-color);
            border-radius: 4px;
            overflow: hidden;
            margin: 0 1rem;
        }

        .rating-bar-fill {
            height: 100%;
            background-color: #f59e0b;
            border-radius: 4px;
        }

        .rating-percentage {
            width: 40px;
            font-size: 0.9rem;
            color: var(--light-text-color);
            text-align: right;
        }

        .comments-filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .comments-filter {
            padding: 0.5rem 1rem;
            background-color: var(--background-color);
            border-radius: 9999px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
        }
        .comments-filter:hover {
            background-color: var(--border-color);
        }
        .comments-filter.active {
            background-color: var(--primary-color);
            color: white;
        }

        .comments-list {
            max-height: 500px;
            overflow-y: auto;
            padding-right: 0.5rem;
        }
        .comments-list::-webkit-scrollbar {
            width: 6px;
        }
        .comments-list::-webkit-scrollbar-thumb {
            background-color: var(--border-color);
            border-radius: 3px;
        }
        .comments-list::-webkit-scrollbar-track {
            background-color: var(--background-color);
        }

        .comment-item {
            background: var(--background-color);
            padding: 1.5rem;
            border-radius: 0.75rem;
            margin-bottom: 1rem;
            box-shadow: var(--shadow-light);
            transition: var(--transition);
        }
        .comment-item:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-medium);
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.5rem;
        }

        .comment-author {
            font-weight: 600;
            color: var(--secondary-color);
        }

        .comment-date {
            font-size: 0.8rem;
            color: var(--light-text-color);
        }

        .comment-rating {
            color: #f59e0b;
            margin: 0.5rem 0;
        }

        .comment-text {
            line-height: 1.7;
        }

        .sentiment-positive {
            border-left: 4px solid #10b981;
        }
        .sentiment-neutral {
            border-left: 4px solid #f59e0b;
        }
        .sentiment-negative {
            border-left: 4px solid #ef4444;
        }

        .rating-input {
            margin-bottom: 1.5rem;
        }

        .rating-input label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .star-rating {
            display: inline-block;
            direction: rtl;
        }

        .star-rating label {
            font-size: 2rem;
            color: var(--border-color);
            cursor: pointer;
            transition: var(--transition);
            padding: 0 0.1rem;
        }

        .star-rating label:hover,
        .star-rating label:hover ~ label,
        .star-rating input:checked ~ label {
            color: #f59e0b;
        }

        .star-rating input { 
            display: none; 
        }

        .comment-form {
            background-color: var(--background-color);
            padding: 1.5rem;
            border-radius: 0.75rem;
            margin-top: 2rem;
        }

        .comment-form h4 {
            font-size: 1.25rem;
            color: var(--secondary-color);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        .comment-form h4 i {
            color: var(--primary-color);
            font-size: 1.1rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .comment-form input, 
        .comment-form textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            margin: 0.5rem 0;
            border-radius: 0.5rem;
            border: 1px solid var(--border-color);
            font-size: 1rem;
            transition: var(--transition);
        }

        .comment-form input:focus, 
        .comment-form textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.2);
        }

        .comment-form textarea {
            min-height: 120px;
            resize: vertical;
        }

        .comment-form button {
            background-color: var(--primary-color);
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        .comment-form button:hover { 
            background-color: var(--primary-hover); 
            transform: translateY(-2px);
        }
        .comment-form button i {
            font-size: 0.9rem;
        }

        /* --- Opciones de Compra --- */
        .buy-options {
            margin-top: 2rem;
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .buy-options h3 {
            flex-basis: 100%;
            margin-bottom: 1rem;
            font-size: 1.5rem;
            color: var(--secondary-color);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        .buy-options h3 i {
            color: var(--primary-color);
            font-size: 1.1rem;
        }

        .buy-link {
            display: inline-flex;
            align-items: center;
            padding: 0.75rem 1.5rem;
            background-color: var(--primary-color);
            color: white;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: var(--transition);
            gap: 0.75rem;
        }
        .buy-link:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-medium);
        }

        .buy-link i {
            font-size: 1.1rem;
        }

        .buy-link.amazon { background-color: #ff9900; }
        .buy-link.amazon:hover { background-color: #e68a00; }

        .buy-link.mediamarkt { background-color: #e30613; }
        .buy-link.mediamarkt:hover { background-color: #c90511; }

        .buy-link.pccomponentes { background-color: #00a89d; }
        .buy-link.pccomponentes:hover { background-color: #008f86; }

        .buy-link.original { background-color: #333; }
        .buy-link.original:hover { background-color: #000; }

        .buy-link.backmarket { background-color: #00c0a3; }
        .buy-link.backmarket:hover { background-color: #00a68d; }

        .buy-link.thomann { background-color: #000; }
        .buy-link.thomann:hover { background-color: #333; }

        .buy-link.elcorteingles { background-color: #00a0e3; }
        .buy-link.elcorteingles:hover { background-color: #0088c3; }

        /* --- Modal de Comparación --- */
        .compare-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            overflow-y: auto;
            padding: 2rem 0;
        }

        .compare-modal-content {
            background-color: var(--card-bg-color);
            margin: auto;
            padding: 2.5rem;
            border-radius: 1.25rem;
            max-width: 1200px;
            position: relative;
            box-shadow: var(--shadow-hover);
        }

        .compare-modal-close {
            position: absolute;
            right: 1.5rem;
            top: 1.5rem;
            font-size: 2rem;
            cursor: pointer;
            color: var(--light-text-color);
            transition: var(--transition);
        }
        .compare-modal-close:hover {
            color: var(--text-color);
            transform: rotate(90deg);
        }

        .compare-modal h2 {
            font-size: 2rem;
            color: var(--secondary-color);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        .compare-modal h2 i {
            color: var(--primary-color);
        }

        .compare-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1.5rem;
        }

        .compare-table th {
            text-align: left;
            padding: 1rem;
            background-color: var(--background-color);
            color: var(--secondary-color);
            font-weight: 600;
            border-bottom: 2px solid var(--border-color);
        }

        .compare-table td {
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            vertical-align: top;
        }

        .compare-table tr:last-child td {
            border-bottom: none;
        }

        .compare-product-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            text-align: center;
        }

        .compare-product-image {
            width: 120px;
            height: 120px;
            object-fit: contain;
        }

        .compare-product-name {
            font-weight: 600;
            color: var(--secondary-color);
        }

        .compare-product-price {
            font-weight: 700;
            color: var(--primary-color);
        }

        .compare-feature-value {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .compare-feature-value ul {
            list-style: none;
            padding-left: 0;
        }

        .compare-feature-value li {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            line-height: 1.5;
        }

        .compare-feature-value li::before {
            content: '•';
            color: var(--primary-color);
        }

        .compare-winner {
            background-color: rgba(16, 185, 129, 0.1);
            position: relative;
        }
        .compare-winner::after {
            content: '✓ Mejor opción';
            position: absolute;
            top: 0;
            right: 0;
            background-color: #10b981;
            color: white;
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            font-weight: 600;
            border-radius: 0 0 0 0.25rem;
        }

        /* --- Páginas de Políticas --- */
        .policy-page {
            max-width: 1000px;
            margin: 2rem auto;
            padding: 2rem;
            background-color: var(--card-bg-color);
            border-radius: 1rem;
            box-shadow: var(--shadow-light);
        }
        
        .policy-page h1 {
            font-size: 2rem;
            color: var(--secondary-color);
            margin-bottom: 1.5rem;
        }
        
        .policy-page h2 {
            font-size: 1.5rem;
            color: var(--secondary-color);
            margin-top: 2rem;
            margin-bottom: 1rem;
        }
        
        .policy-page p {
            margin-bottom: 1rem;
            line-height: 1.7;
        }
        
        .policy-page ul {
            margin-bottom: 1.5rem;
            padding-left: 1.5rem;
        }
        
        .policy-page li {
            margin-bottom: 0.5rem;
        }

        /* --- Footer y Contacto --- */
        footer {
            text-align: center;
            padding: 3rem;
            background: var(--secondary-color);
            color: white;
            margin-top: 3rem;
            border-radius: 1.25rem 1.25rem 0 0;
        }

        footer p { 
            margin-bottom: 0.5rem; 
            color: rgba(255,255,255,0.8);
        }

        footer a { 
            color: #93c5fd; 
            font-weight: 500;
        }
        footer a:hover {
            color: white;
            text-decoration: underline;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }

        .footer-links a {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .social-links a {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        .social-links a:hover {
            background-color: var(--primary-color);
            transform: translateY(-3px);
        }

        .copyright {
            font-size: 0.9rem;
            color: rgba(255,255,255,0.6);
            margin-top: 1.5rem;
        }

        /* --- Animaciones --- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideUp {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* --- Responsive Design --- */
        @media (max-width: 1200px) {
            .modal-content {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .modal-image {
                max-height: 300px;
            }
        }

        @media (max-width: 992px) {
            header { 
                padding: 1.25rem 1.5rem; 
            }
            
            .main-nav { 
                display: none; 
            }
            
            .dropdown { 
                display: none; 
            }
            
            main { 
                padding: 2rem; 
            }
            
            .hero-section { 
                padding: 4rem 1rem; 
            }
            
            .hero-section h2 { 
                font-size: 2.2rem; 
            }
            
            .hero-section p { 
                font-size: 1rem; 
            }
            
            .profile-selector {
                grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            }
            
            .products-grid { 
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); 
            }
            
            .pros-cons-section {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .modal-content {
                padding: 1.5rem;
            }
            
            .compare-modal-content {
                padding: 1.5rem;
            }
            
            .compare-table {
                display: block;
                overflow-x: auto;
                white-space: nowrap;
            }
            
            .rating-overview {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .cookie-consent {
                flex-direction: column;
                text-align: center;
            }
            
            .cookie-actions {
                width: 100%;
                justify-content: center;
            }
            
            .cookie-btn {
                width: 100%;
            }
        }

        @media (max-width: 576px) {
            .hero-section h2 {
                font-size: 1.8rem;
            }
            
            .profile-selector {
                grid-template-columns: 1fr 1fr;
            }
            
            .product-card .info h4 {
                font-size: 1.1rem;
            }
            
            .modal-details h2 {
                font-size: 1.5rem;
            }
            
            .modal-details h3 {
                font-size: 1.25rem;
            }
            
            .compare-bar {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
                padding: 1rem;
            }
            
            .compare-actions {
                width: 100%;
            }
            
            .compare-actions button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MCHVBL7Z"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<!-- Consentimiento de Cookies y Privacidad -->
<div id="cookieConsent" class="cookie-consent" style="display: none;">
    <p>Utilizamos cookies para mejorar tu experiencia en nuestro sitio. Al continuar navegando, aceptas nuestra <a href="#privacy-policy" style="color: #93c5fd;">Política de Privacidad</a> y el uso de cookies.</p>
    <div class="cookie-actions">
        <button class="cookie-btn cookie-accept" onclick="acceptCookies()">Aceptar</button>
        <button class="cookie-btn cookie-reject" onclick="rejectCookies()">Rechazar</button>
    </div>
</div>

<header>
    <div class="header-left">
        <span class="menu-btn" onclick="openMenu()"><i class="fas fa-bars"></i></span>
        <h1 onclick="resetPage()">Estudio Tech</h1>
    </div>
    <nav class="main-nav">
        <a href="#portatiles" class="nav-link"><i class="fas fa-laptop"></i> Portátiles</a>
        <a href="#moviles" class="nav-link"><i class="fas fa-mobile-alt"></i> Móviles</a>
        <a href="#tablets" class="nav-link"><i class="fas fa-tablet-alt"></i> Tablets</a>
        <a href="#accesorios" class="nav-link"><i class="fas fa-keyboard"></i> Accesorios</a>
    </nav>
    <div class="dropdown">
        <span class="dropdown-btn"><i class="fas fa-user-graduate"></i> Perfiles <i class="fas fa-caret-down"></i></span>
        <div class="dropdown-content" id="profileDropdown">
            <!-- Generado dinámicamente -->
        </div>
    </div>
</header>

<!-- Sidebar de Filtros -->
<div id="sidebar" class="sidebar">
    <span class="close-btn" onclick="closeMenu()">&times;</span>
    <h3><i class="fas fa-list"></i> Categorías</h3>
    <a onclick="setCategory('all')"><i class="fas fa-boxes"></i> Todos los productos</a>
    <a onclick="setCategory('portatiles')"><i class="fas fa-laptop"></i> Portátiles</a>
    <a onclick="setCategory('moviles')"><i class="fas fa-mobile-alt"></i> Móviles</a>
    <a onclick="setCategory('tablets')"><i class="fas fa-tablet-alt"></i> Tablets</a>
    <a onclick="setCategory('accesorios')"><i class="fas fa-keyboard"></i> Accesorios</a>
    
    <div class="filter-section">
        <h3><i class="fas fa-filter"></i> Filtrar por Precio (€)</h3>
        <label for="minPrice">Mínimo:</label>
        <input type="number" id="minPrice" placeholder="0" min="0" />
        <label for="maxPrice">Máximo:</label>
        <input type="number" id="maxPrice" placeholder="9999" min="0" />
        <button onclick="applyFilters()"><i class="fas fa-check"></i> Aplicar Filtros</button>
    </div>
    
    <div class="filter-section">
        <h3><i class="fas fa-search"></i> Buscar</h3>
        <input type="text" id="searchText" placeholder="Buscar por nombre..." />
        <button onclick="applyFilters()"><i class="fas fa-search"></i> Buscar</button>
    </div>
    
    <div class="filter-section">
        <h3><i class="fas fa-sort"></i> Ordenar por</h3>
        <select id="sortBy" onchange="applyFilters()">
            <option value="default">Por defecto</option>
            <option value="price_asc">Precio: Menor a Mayor</option>
            <option value="price_desc">Precio: Mayor a Menor</option>
            <option value="name_asc">Nombre: A-Z</option>
            <option value="name_desc">Nombre: Z-A</option>
            <option value="rating_desc">Mejor valorados</option>
        </select>
    </div>
</div>

<!-- Barra de Comparación -->
<div id="compareBar" class="compare-bar">
    <div class="compare-items" id="compareItems">
        <!-- Items de comparación se añaden aquí -->
    </div>
    <div class="compare-actions">
        <button class="compare-clear" onclick="clearCompare()"><i class="fas fa-trash"></i> Limpiar</button>
        <button class="compare-button" id="compareButton" onclick="openCompareModal()" disabled><i class="fas fa-exchange-alt"></i> Comparar (<span id="compareCount">0</span>)</button>
    </div>
</div>

<main id="mainContent">
    <section class="hero-section">
        <h2>Asesoría Tecnológica Personalizada</h2>
        <p>
            Encuentra la herramienta ideal para tu éxito académico y profesional. Selecciona tu perfil y descubre un mundo de recomendaciones a medida.
        </p>
        <div class="profile-selector" id="profileSelector">
            <!-- Generado dinámicamente -->
        </div>
    </section>

    <div id="product-list">
        <section id="portatiles" class="product-section">
            <div class="section-header" onclick="toggleSection('portatiles')">
                <h2><i class="fas fa-laptop"></i> Portátiles</h2>
                <span class="section-toggle"><i class="fas fa-chevron-down"></i></span>
            </div>
            <div class="products-container">
                <div class="products-grid" data-category="portatiles"></div>
            </div>
        </section>
        
        <section id="moviles" class="product-section">
            <div class="section-header" onclick="toggleSection('moviles')">
                <h2><i class="fas fa-mobile-alt"></i> Móviles</h2>
                <span class="section-toggle"><i class="fas fa-chevron-down"></i></span>
            </div>
            <div class="products-container">
                <div class="products-grid" data-category="moviles"></div>
            </div>
        </section>
        
        <section id="tablets" class="product-section">
            <div class="section-header" onclick="toggleSection('tablets')">
                <h2><i class="fas fa-tablet-alt"></i> Tablets</h2>
                <span class="section-toggle"><i class="fas fa-chevron-down"></i></span>
            </div>
            <div class="products-container">
                <div class="products-grid" data-category="tablets"></div>
            </div>
        </section>
        
        <section id="accesorios" class="product-section">
            <div class="section-header" onclick="toggleSection('accesorios')">
                <h2><i class="fas fa-keyboard"></i> Accesorios</h2>
                <span class="section-toggle"><i class="fas fa-chevron-down"></i></span>
            </div>
            <div class="products-container">
                <div class="products-grid" data-category="accesorios"></div>
            </div>
        </section>
    </div>
</main>

<!-- Páginas de Políticas (ocultas por defecto) -->
<div id="privacy-policy" class="policy-page" style="display: none;">
    <h1><i class="fas fa-shield-alt"></i> Política de Privacidad</h1>
    <p>Última actualización: 4 de agosto de 2025</p>
    
    <h2>1. Información que recopilamos</h2>
    <p>Recopilamos información cuando te registras en nuestro sitio, realizas una compra, participas en un concurso o encuesta, y/o cuando cierras sesión. La información recopilada incluye tu nombre, dirección de correo electrónico, número de teléfono y/o tarjeta de crédito.</p>
    
    <h2>2. Uso de la información</h2>
    <p>Cualquier información que recopilamos de ti puede ser utilizada para:</p>
    <ul>
        <li>Personalizar tu experiencia y responder a tus necesidades individuales</li>
        <li>Mejorar nuestro sitio web</li>
        <li>Mejorar el servicio al cliente y tus necesidades de soporte</li>
        <li>Contactarte por correo electrónico</li>
        <li>Administrar un concurso, promoción o encuesta</li>
    </ul>
    
    <h2>3. Protección de la información</h2>
    <p>Implementamos una variedad de medidas de seguridad para mantener la seguridad de tu información personal. Utilizamos cifrado avanzado para proteger la información confidencial transmitida en línea.</p>
    
    <h2>4. Uso de cookies</h2>
    <p>Nuestro sitio utiliza cookies para mejorar el acceso a nuestro sitio e identificar visitantes recurrentes. Además, nuestras cookies mejoran la experiencia del usuario al rastrear y orientar sus intereses.</p>
    
    <h2>5. Divulgación a terceros</h2>
    <p>No vendemos, intercambiamos ni transferimos de ninguna manera tu información personal identificable a terceros. Esto no incluye a terceros de confianza que nos ayudan a operar nuestro sitio web o llevar a cabo nuestro negocio, siempre y cuando esas partes acuerden mantener esta información confidencial.</p>
    
    <h2>6. Consentimiento</h2>
    <p>Al utilizar nuestro sitio, aceptas nuestra política de privacidad.</p>
    
    <button onclick="hidePolicyPage()" class="cookie-btn cookie-accept" style="margin-top: 2rem;">Volver a la tienda</button>
</div>

<div id="shipping-policy" class="policy-page" style="display: none;">
    <h1><i class="fas fa-truck"></i> Envíos y Devoluciones</h1>
    
    <h2>1. Política de Envíos</h2>
    <p>Procesamos y enviamos todos los pedidos en un plazo de 1-3 días laborables. Los tiempos de entrega estimados son:</p>
    <ul>
        <li>Envío estándar: 3-5 días laborables</li>
        <li>Envío express: 1-2 días laborables</li>
    </ul>
    <p>Los gastos de envío se calculan en el momento de la compra según el peso del paquete y el destino.</p>
    
    <h2>2. Seguimiento de Pedidos</h2>
    <p>Una vez que tu pedido haya sido enviado, recibirás un correo electrónico con un número de seguimiento y un enlace para rastrear tu paquete.</p>
    
    <h2>3. Política de Devoluciones</h2>
    <p>Aceptamos devoluciones dentro de los 30 días posteriores a la recepción del pedido. Para ser elegible para una devolución:</p>
    <ul>
        <li>El artículo debe estar en su estado original, sin usar y con todas las etiquetas</li>
        <li>Debe incluir el recibo o prueba de compra</li>
    </ul>
    
    <h2>4. Reembolsos</h2>
    <p>Una vez recibida e inspeccionada la devolución, te enviaremos un correo electrónico para notificarte que hemos recibido tu artículo devuelto. También te notificaremos la aprobación o el rechazo de tu reembolso.</p>
    
    <button onclick="hidePolicyPage()" class="cookie-btn cookie-accept" style="margin-top: 2rem;">Volver a la tienda</button>
</div>

<footer>
    <div class="footer-links">
        <a href="#"><i class="fas fa-info-circle"></i> Sobre Nosotros</a>
        <a href="#"><i class="fas fa-question-circle"></i> Preguntas Frecuentes</a>
        <a href="#" onclick="showShippingPolicy()"><i class="fas fa-shipping-fast"></i> Envíos y Devoluciones</a>
        <a href="#" onclick="showPrivacyPolicy()"><i class="fas fa-shield-alt"></i> Política de Privacidad</a>
    </div>
    
    <p>¿Necesitas ayuda personalizada? Contáctanos en <a href="mailto:consultaestudiotech@gmail.com">consultaestudiotech@gmail.com</a></p>
    
    <div class="social-links">
        <a href="#"><i class="fab fa-twitter"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-facebook-f"></i></a>
        <a href="#"><i class="fab fa-youtube"></i></a>
    </div>
    
    <p class="copyright">&copy; 2025 Estudio Tech. Todos los derechos reservados.</p>
</footer>

<!-- Modal de Detalles del Producto -->
<div id="productModal" class="modal">
    <div class="modal-content">
        <span class="modal-close" onclick="closeModal()">&times;</span>
        <div class="modal-image-container">
            <img id="modalImage" class="modal-image" src="" alt="" />
        </div>
        <div class="modal-details">
            <h2 id="modalTitle"></h2>
            <div class="price" id="modalPrice"></div>
            <div id="modalRating" class="rating-stars"></div>
            <p id="modalDescription"></p>
            
            <h3><i class="fas fa-list-check"></i> Características clave</h3>
            <ul id="modalFeaturesList"></ul>

            <h3><i class="fas fa-scale-balanced"></i> Pros y Contras</h3>
            <div class="pros-cons-section">
                <div>
                    <h4><i class="fas fa-thumbs-up"></i> Pros</h4>
                    <ul id="modalProsList" class="pros-list"></ul>
                </div>
                <div>
                    <h4><i class="fas fa-thumbs-down"></i> Contras</h4>
                    <ul id="modalConsList" class="cons-list"></ul>
                </div>
            </div>

            <h3 id="profileRecommendationTitle"><i class="fas fa-star"></i> Recomendado para ti</h3>
            <p id="modalRecommendationsText"></p>
            
            <div class="buy-options" id="buyLinks">
                <h3><i class="fas fa-shopping-cart"></i> Opciones de compra</h3>
                <!-- Generado dinámicamente -->
            </div>
        </div>
        
        <div class="comments-section">
            <h3><i class="fas fa-comments"></i> Valoraciones y comentarios (<span id="commentCount">0</span>)</h3>
            
            <div class="rating-overview" id="ratingOverview">
                <!-- Generado dinámicamente -->
            </div>
            
            <div class="comments-filters" id="commentsFilters">
                <!-- Generado dinámicamente -->
            </div>
            
            <div class="comments-list" id="commentsList">
                <!-- Los comentarios reales de los usuarios aparecerán aquí -->
                <p>No hay comentarios todavía. ¡Sé el primero en opinar sobre este producto!</p>
            </div>
            
            <form id="commentForm" class="comment-form">
                <h4><i class="fas fa-edit"></i> Añade tu valoración</h4>
                
                <div class="form-group">
                    <label>Tu valoración</label>
                    <div class="star-rating">
                        <input type="radio" id="star5" name="rating" value="5" /><label for="star5" title="5 estrellas">★</label>
                        <input type="radio" id="star4" name="rating" value="4" /><label for="star4" title="4 estrellas">★</label>
                        <input type="radio" id="star3" name="rating" value="3" /><label for="star3" title="3 estrellas">★</label>
                        <input type="radio" id="star2" name="rating" value="2" /><label for="star2" title="2 estrellas">★</label>
                        <input type="radio" id="star1" name="rating" value="1" /><label for="star1" title="1 estrella">★</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <input type="text" id="commentName" placeholder="Tu nombre" required />
                </div>
                
                <div class="form-group">
                    <textarea id="commentText" placeholder="Comparte tu opinión sobre este producto..." required></textarea>
                </div>
                
                <button type="submit"><i class="fas fa-paper-plane"></i> Enviar comentario</button>
            </form>
        </div>
    </div>
</div>

<!-- Modal de Comparación -->
<div id="compareModal" class="compare-modal">
    <div class="compare-modal-content">
        <span class="compare-modal-close" onclick="closeCompareModal()">&times;</span>
        <h2><i class="fas fa-exchange-alt"></i> Comparar Productos</h2>
        <div id="compareTableContainer">
            <!-- Generado dinámicamente -->
        </div>
    </div>
</div>

<script>
    // Base de datos de productos ampliada
    const products = [
        // --- PORTÁTILES ---
        {id:1, name:"MacBook Air M3", price:1299, category:"portatiles", rating:4.7,
         image:"https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/mba15-midnight-select-202402?wid=904&hei=844&fmt=jpeg&qlt=90&.v=1708367683917",
         description:"Un portátil ultraligero con el potente chip M3 de Apple. Rendimiento excepcional para tareas diarias y profesionales, con una batería de hasta 18 horas.",
         features:["Chip Apple M3", "8 GB RAM unificada", "256 GB SSD", "Pantalla Liquid Retina de 15 pulgadas", "Diseño ultraligero y silencioso"],
         pros:["Rendimiento excepcional y eficiencia energética", "Batería de larga duración", "Diseño de alta calidad", "Ecosistema Apple"],
         cons:["Pocos puertos de conexión", "El modelo base puede quedarse corto para tareas muy exigentes", "Precio elevado"],
         recommendations:{ingenieria:"Perfecto para Ingeniería de Software y desarrollo web.",disenografico:"Fantástico para diseño 2D, ilustración y edición de fotos.",medicina:"La mejor herramienta para la gestión de archivos y la lectura de documentos.",programacion:"Excelente para el desarrollo web y móvil.",marketing:"Ideal para la gestión de proyectos y la creación de contenido digital.",audiovisual:"Muy capaz para la edición de foto y vídeo en 4K.",escritor:"Compañero ideal para escritores.",musico:"Una opción sólida para la producción musical."},
         buyLinks:[
            {name: "Apple Store", url:"https://www.apple.com/es/macbook-air-m3/", store:"original"},
            {name: "Amazon", url:"https://www.amazon.es/Apple-2024-MacBook-Air-Chip/dp/B0CX2CJY4V", store:"amazon"},
            {name: "PC Componentes", url:"https://www.pccomponentes.com/apple-macbook-air-m3", store:"pccomponentes"}
         ]
        },
        {id:2, name:"Dell XPS 15", price:1899, category:"portatiles", rating:4.5,
         image:"https://i.dell.com/is/image/Dell/xps-15-9530-pdp-polaris-kansas-r-b-00018-black?fmt=png-alpha&wid=5000&hei=5000",
         description:"Un potente portátil con una pantalla deslumbrante, ideal para tareas que requieren alto rendimiento gráfico y multitarea.",
         features:["Intel Core i7 de 13ª Gen", "16 GB RAM DDR5", "1 TB SSD", "Pantalla OLED de 15.6 pulgadas", "Tarjeta gráfica dedicada NVIDIA GeForce RTX 4070"],
         pros:["Rendimiento de alto nivel", "Pantalla OLED de colores vibrantes", "Diseño premium y robusto", "Tarjeta gráfica potente"],
         cons:["Precio muy elevado", "La batería podría ser mejor", "Puede calentarse bajo carga pesada"],
         recommendations:{ingenieria:"La mejor opción para software de modelado 3D (CAD), simulaciones pesadas y renderizado.",disenografico:"Su pantalla OLED con colores vivos y el rendimiento gráfico lo hacen perfecto para la edición profesional.",programacion:"La potencia ideal para desarrollo de software complejo.",audiovisual:"El portátil perfecto para la edición de vídeo en 4K/8K."},
         buyLinks:[
            {name: "Dell Store", url:"https://www.dell.com/es-es/shop/ordenadores-portatiles-de-dell/xps-15/spd/xps-15-9530-laptop", store:"original"},
            {name: "PC Componentes", url:"https://www.pccomponentes.com/dell-xps-15", store:"pccomponentes"}
         ]
        },
        {id:3, name:"Lenovo Yoga Slim 7", price:999, category:"portatiles", rating:4.3,
         image:"https://p1-ofp.static.pub/medias/bWFzdGVyfHJvb3R8MjMwNzQ3fGltYWdlL3BuZ3xoMjUvaDJhLzE4Nzg2MTM0MDM5NTgyLnBuZ3w0YjMwOTc0ODU5NTA2YTJkZWZmZWJiMzYyYTc0N2M3MmMwZDg1MjExOWI3YTJkZTM3MzY0NDdkYmM2ZjQ4N2I5/lenovo-yoga-slim-7-14iau7-hero.png",
         description:"Un portátil ultraportátil y elegante con un excelente equilibrio entre potencia, diseño y precio.",
         features:["Intel Core i7 de 12ª Gen", "16 GB RAM", "512 GB SSD", "Pantalla de 14 pulgadas OLED"],
         pros:["Pantalla OLED fantástica", "Diseño ligero y atractivo", "Excelente relación calidad-precio"],
         cons:["Rendimiento gráfico limitado", "Autonomía de la batería regular"],
         recommendations:{ingenieria:"Una opción sólida si buscas portabilidad sin renunciar a la potencia.",disenografico:"Buena opción por su pantalla OLED para diseño 2D.",medicina:"Perfecto para la movilidad y la consulta de datos.",programacion:"Una excelente herramienta para el desarrollo de software.",marketing:"Buena relación calidad-precio para profesionales.",audiovisual:"Suficiente para proyectos de edición ligeros."},
         buyLinks:[
            {name: "Lenovo Store", url:"https://www.lenovo.com/es/es/p/laptops/yoga/yoga-slim-series/yoga-slim-7-14iau7/82b3003rge", store:"original"},
            {name: "MediaMarkt", url:"https://www.mediamarkt.es/es/product/_portatil-lenovo-yoga-slim-7", store:"mediamarkt"},
            {name: "Amazon", url:"https://www.amazon.es/Lenovo-Yoga-Slim-7", store:"amazon"}
         ]
        },
        {id:4, name:"HP Spectre x360", price:1500, category:"portatiles", rating:4.4,
         image:"https://i.hp.com/is/image/HPInc/spectre-x360-14-eu-hero?wid=1000&hei=1000",
         description:"Portátil convertible con diseño premium y versatilidad. Ideal para quienes necesitan un dispositivo que también funcione como tablet.",
         features:["Intel Core i7 (última gen)", "16 GB RAM", "512 GB SSD", "Pantalla táctil OLED de 13.5 pulgadas", "Diseño 2 en 1"],
         pros:["Gran versatilidad (portátil y tablet)", "Pantalla táctil y soporte para stylus", "Diseño elegante y premium", "Buen rendimiento para multitarea"],
         cons:["Precio elevado", "El modo tablet es menos intuitivo que un iPad", "Autonomía de la batería mejorable"],
         recommendations:{ingenieria:"Útil para anotaciones y bocetos digitales en clase o reuniones.",disenografico:"La pantalla táctile y el soporte para stylus lo hacen perfecto para el diseño.",marketing:"Excelente para presentaciones y la toma de notas.",audiovisual:"Muy útil para storyboard y bocetos."},
         buyLinks:[
            {name: "HP Store", url:"https://www.hp.com/es-es/laptops/spectre-x360.html", store:"original"},
            {name: "MediaMarkt", url:"https://www.mediamarkt.es/es/product/_portatil-convertible-hp-spectre-x360", store:"mediamarkt"},
            {name: "Back Market", url:"https://www.backmarket.es/es-es/search?q=hp%20spectre%20x360", store:"backmarket"}
         ]
        },
        {id:5, name:"Microsoft Surface Laptop Studio", price:1600, category:"portatiles", rating:4.2,
         image:"https://img-prod-cms-rt-microsoft-com.akamaized.net/cms/api/am/image/RE4QhBv",
         description:"Portátil innovador con una bisagra flexible que permite múltiples posiciones. Diseñado para creadores de contenido.",
         features:["Intel Core i7", "16 GB RAM", "512 GB SSD", "Pantalla de 14.4 pulgadas", "Diseño con bisagra dinámica"],
         pros:["Diseño de bisagra único y versátil", "Ideal para dibujo y diseño", "Construcción de alta calidad", "Excelente webcam y micrófonos"],
         cons:["Precio elevado", "Bisagra puede ser frágil a largo plazo", "Rendimiento gráfico limitado en el modelo base"],
         recommendations:{disenografico:"El mejor portátil para diseñadores, con una pantalla que se inclina para dibujar cómodamente.",programacion:"Innovador para la codificación y la multitarea.",audiovisual:"El diseño de la bisagra es ideal para editar video."},
         buyLinks:[
            {name: "Microsoft Store", url:"https://www.microsoft.com/es-es/d/surface-laptop-studio/", store:"original"},
            {name: "PC Componentes", url:"https://www.pccomponentes.com/microsoft-surface-laptop-studio", store:"pccomponentes"}
         ]
        },
        {id:17, name:"Asus ROG Zephyrus G14", price:1999, category:"portatiles", rating:4.6,
         image:"https://dlcdnwebimgs.asus.com/gain/3D28E8C7-71EF-4856-A833-D616995C2668/w717/h500",
         description:"Un portátil compacto pero increíblemente potente, ideal para ingenieros que necesitan correr software muy pesado.",
         features:["Procesador AMD Ryzen 9", "32 GB RAM", "1 TB SSD", "Pantalla de 14 pulgadas 120Hz", "GPU NVIDIA GeForce RTX 4070"],
         pros:["Muy potente para su tamaño", "Ideal para juegos y software exigente", "Pantalla de alta tasa de refresco"],
         cons:["Autonomía de batería limitada bajo carga pesada", "Puede generar mucho calor y ruido", "Precio muy alto"],
         recommendations:{ingenieria:"Perfecto para Ingeniería Aeroespacial, Mecánica y de Datos.",programacion:"La mejor opción si además de programar, te gusta el desarrollo de videojuegos.",audiovisual:"Potencia de sobra para edición de vídeo y renderizado."},
         buyLinks:[
            {name: "PC Componentes", url:"https://www.pccomponentes.com/asus-rog-zephyrus-g14", store:"pccomponentes"},
            {name: "Amazon", url:"https://www.amazon.es/ASUS-ROG-Zephyrus-G14/dp/B0BQR8QG4Y", store:"amazon"}
         ]
        },
        {id:18, name:"Lenovo ThinkPad P1 Gen 5", price:2500, category:"portatiles", rating:4.8,
         image:"https://p1-ofp.static.pub/medias/bWFzdGVyfHJvb3R8MjQ2Njg0fGltYWdlL3BuZ3xoNDQvaGI1LzEzODc2OTkxMTQxNDcwLnBuZ3w0YjMwOTc0ODU5NTA2YTJkZWZmZWJiMzYyYTc0N2M3MmMwZDg1MjExOWI3YTJkZTM3MzY0NDdkYmM2ZjQ4N2I5/lenovo-thinkpad-p1-gen-5-hero.png",
         description:"Una workstation portátil pensada para los ingenieros y arquitectos más exigentes.",
         features:["Intel Core i9 de 12ª Gen", "64 GB RAM", "2 TB SSD", "Pantalla 4K de 16 pulgadas", "GPU NVIDIA Quadro"],
         pros:["Máximo rendimiento profesional", "Muy fiable y robusto", "Certificaciones para software profesional"],
         cons:["Extremadamente caro", "No es el más ligero ni el más bonito", "Autonomía de batería limitada"],
         recommendations:{ingenieria:"El portátil definitivo para Ingeniería Civil, Arquitectura y modelado 3D profesional.",programacion:"Ideal para desarrolladores que trabajan con big data, IA o entornos de virtualización."},
         buyLinks:[
            {name: "Lenovo Store", url:"https://www.lenovo.com/es/es/p/laptops/thinkpad/thinkpad-p-series/thinkpad-p1-gen-5/21dc0011sp", store:"original"}
         ]
        },
        {id:21, name:"Acer Swift 3", price:799, category:"portatiles", rating:4.1,
         image:"https://static.acer.com/up/Resource/Acer/Laptops/Swift_3/Image/20210112/Acer-Swift-3-SF314-42-Gallery-01.png",
         description:"Portátil ultraligero con excelente relación calidad-precio, ideal para estudiantes.",
         features:["AMD Ryzen 7", "16 GB RAM", "512 GB SSD", "Pantalla Full HD de 14 pulgadas", "Peso de solo 1.2 kg"],
         pros:["Muy ligero y portable", "Buen rendimiento para el precio", "Batería de larga duración"],
         cons:["Pantalla no es la más brillante", "Materiales de construcción básicos"],
         recommendations:{estudiante:"Perfecto para estudiantes que necesitan un portátil ligero y asequible.",medicina:"Buena opción para estudiantes de medicina por su portabilidad.",marketing:"Suficiente para tareas básicas de marketing y redes sociales."},
         buyLinks:[
            {name: "Acer Store", url:"https://store.acer.com/es/es/portatiles/acer-swift-3-sf314-43", store:"original"},
            {name: "El Corte Inglés", url:"https://www.elcorteingles.es/electronica/A46830567-apple-iphone-14-128-gb/", store:"elcorteingles"},
            {name: "Amazon", url:"https://www.amazon.es/Acer-SF314-43-R2Y5-Port%C3%A1til-Ryzen-512GB/dp/B08Y2MGV4X", store:"amazon"}
         ]
        },
        
        // --- MÓVILES ---
        {id:6, name:"Google Pixel 8 Pro", price:1099, category:"moviles", rating:4.6,
         image:"https://storage.googleapis.com/gweb-uniblog-publish-prod/images/Google_Pixel_8_Pro_Obispo.width-1200.format-webp.webp",
         description:"El Pixel 8 Pro destaca por su cámara avanzada con IA y software Android puro.",
         features:["Chip Google Tensor G3", "Cámara profesional de 50 MP", "Pantalla de 6.7 pulgadas", "Funciones de IA avanzadas"],
         pros:["Cámara con IA excepcional", "Experiencia de Android puro", "Actualizaciones de software garantizadas", "Diseño elegante"],
         cons:["Autonomía de batería mejorable", "El chip Tensor G3 no es el más potente en juegos", "Precio elevado"],
         recommendations:{disenografico:"La mejor opción para fotógrafos y diseñadores.",marketing:"Una herramienta imprescindible para la creación de contenido visual.",audiovisual:"Perfecto para la creación de contenido visual profesional."},
         buyLinks:[
            {name: "Google Store", url:"https://store.google.com/es/product/pixel_8_pro", store:"original"},
            {name: "Amazon", url:"https://www.amazon.es/Google-Pixel-Pro-Smartphone-Desbloqueado/dp/B0BZR2Y7M1", store:"amazon"}
         ]
        },
        {id:7, name:"Samsung Galaxy S24 Ultra", price:1459, category:"moviles", rating:4.7,
         image:"https://images.samsung.com/is/image/samsung/p6pim/es/2401/gallery/es-galaxy-s24-ultra-sm-s928bztdeub-539420077?$650_519_PNG$",
         description:"El Samsung Galaxy S24 Ultra destaca por su versatilidad, su S Pen integrado y su potente cámara con zoom óptico 10x.",
         features:["S Pen integrado", "Cámara con zoom óptico 10x", "Procesador Snapdragon 8 Gen 3", "Pantalla Dynamic AMOLED 2X"],
         pros:["S Pen integrado para productividad", "Cámara versátil con gran zoom", "Pantalla brillante y de alta calidad", "Rendimiento de primer nivel"],
         cons:["Muy caro", "Teléfono grande y pesado", "Mucho bloatware en el software"],
         recommendations:{disenografico:"Su pantalla es una de las mejores del mercado.",medicina:"La mejor herramienta para la toma de notas.",programacion:"El S Pen es útil para anotaciones rápidas.",marketing:"Facilita la creación de maquetas y anotaciones."},
         buyLinks:[
            {name: "Samsung Store", url:"https://www.samsung.com/es/smartphones/galaxy-s24-ultra/", store:"original"},
            {name: "PC Componentes", url:"https://www.pccomponentes.com/samsung-galaxy-s24-ultra", store:"pccomponentes"}
         ]
        },
        {id:8, name:"iPhone 15 Pro Max", price:1469, category:"moviles", rating:4.8,
         image:"https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/iphone-15-pro-max-finish-select-202309-6-7inch-naturaltitanium?wid=1280&hei=1280&fmt=png-alpha&.v=1692846369931",
         description:"El iPhone más potente de Apple, con un chasis de titanio, el chip A17 Pro y un sistema de cámaras revolucionario.",
         features:["Chip A17 Pro", "Cuerpo de titanio", "Sistema de cámaras Pro de 48 MP", "Pantalla ProMotion de 120 Hz"],
         pros:["Chip A17 Pro de alto rendimiento", "Excelente sistema de cámaras", "Construcción de titanio premium", "Ecosistema Apple"],
         cons:["Muy caro", "Poca innovación en el diseño", "Puertos de conexión limitados"],
         recommendations:{disenografico:"Excelente para la creación de contenido visual.",marketing:"La mejor opción para crear contenido para redes sociales.",audiovisual:"El teléfono perfecto para la grabación de video profesional."},
         buyLinks:[
            {name: "Apple Store", url:"https://www.apple.com/es/iphone-15-pro-max/", store:"original"},
            {name: "MediaMarkt", url:"https://www.mediamarkt.es/es/product/_apple-iphone-15-pro-max", store:"mediamarkt"}
         ]
        },
        {id:19, name:"iPhone SE (3ª Gen)", price:529, category:"moviles", rating:4.2,
         image:"https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/iphone-se-select-202203-midnight?wid=940&hei=1112&fmt=png-alpha&.v=1647416738927",
         description:"El iPhone más asequible, con el potente chip A15 Bionic y un diseño compacto.",
         features:["Chip A15 Bionic", "Cámara de 12 MP", "Pantalla de 4.7 pulgadas", "Touch ID"],
         pros:["Rendimiento excelente por el precio", "Tamaño compacto y fácil de manejar", "Largas actualizaciones de software"],
         cons:["Diseño anticuado con marcos grandes", "Batería justa", "Cámara no es la mejor para fotografía avanzada"],
         recommendations:{estudiante:"Ideal para cualquier estudiante que necesita un móvil fiable.",marketing:"Una opción sólida si buscas un teléfono para el día a día.",medicina:"Un buen teléfono de apoyo para la gestión de citas."},
         buyLinks:[
            {name: "Apple Store", url:"https://www.apple.com/es/iphone-se/", store:"original"},
            {name: "MediaMarkt", url:"https://www.mediamarkt.es/es/product/_apple-iphone-se-2022", store:"mediamarkt"},
            {name: "Back Market", url:"https://www.backmarket.es/es-es/search?q=iphone%20se%202022", store:"backmarket"}
         ]
        },
        {id:22, name:"OnePlus 11", price:799, category:"moviles", rating:4.5,
         image:"https://image01.oneplus.net/shop/2023/01/04/1/1d3c5b8e-5a5a-4f5e-9b5e-5e5e5e5e5e5e.png",
         description:"Un teléfono con excelente relación calidad-precio, con un rendimiento fluido y carga ultrarrápida.",
         features:["Snapdragon 8 Gen 2", "16 GB RAM", "256 GB almacenamiento", "Pantalla AMOLED de 6.7\" 120Hz", "Carga de 100W"],
         pros:["Rendimiento excepcional", "Pantalla de alta calidad", "Carga ultrarrápida", "Precio competitivo"],
         cons:["Cámara no es la mejor en su gama", "Sin certificación IP68", "Sin carga inalámbrica"],
         recommendations:{programacion:"Excelente para desarrolladores que necesitan un móvil potente.",ingenieria:"Buena opción para aplicaciones de ingeniería móvil.",estudiante:"Gran relación calidad-precio para estudiantes."},
         buyLinks:[
            {name: "OnePlus Store", url:"https://www.oneplus.com/es", store:"original"},
            {name: "Amazon", url:"https://www.amazon.es/OnePlus-Smartphone-Snapdragon-Pantalla-Almacenamiento/dp/B0BP9VXZ9Z", store:"amazon"}
         ]
        },
        
        // --- TABLETS ---
        {id:9, name:"iPad Pro M2", price:1199, category:"tablets", rating:4.7,
         image:"https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/ipad-pro-11-select-wifi-spacegray-202210?wid=940&hei=1112&fmt=png-alpha&.v=1664411130638",
         description:"La herramienta definitiva para la productividad y la creatividad. Potente, versátil y compatible con el Apple Pencil.",
         features:["Chip Apple M2", "Pantalla Liquid Retina XDR de 12.9 pulgadas", "Compatible con Apple Pencil y Magic Keyboard"],
         pros:["Rendimiento de portátil en formato tablet", "Pantalla de alta calidad", "Ecosistema de aplicaciones creativas", "Accesorios excelentes para productividad"],
         cons:["Precio muy elevado con accesorios", "El sistema operativo sigue siendo limitado comparado con macOS", "Batería podría ser mejor"],
         recommendations:{ingenieria:"La herramienta perfecta para tomar notas y dibujar esquemas.",disenografico:"Una herramienta de trabajo imprescindible para el diseño.",medicina:"La mejor herramienta para el estudio.",audiovisual:"Excelente para la edición de vídeo con LumaFusion."},
         buyLinks:[
            {name: "Apple Store", url:"https://www.apple.com/es/ipad-pro/", store:"original"},
            {name: "MediaMarkt", url:"https://www.mediamarkt.es/es/product/_apple-ipad-pro-11-2022-wifi-128gb-gris-espacial-1532912.html", store:"mediamarkt"}
         ]
        },
        {id:10, name:"Samsung Galaxy Tab S9 Ultra", price:1349, category:"tablets", rating:4.5,
         image:"https://images.samsung.com/is/image/samsung/p6pim/es/2307/gallery/es-galaxy-tab-s9-ultra-x910-482813-sm-x910nzieub-537449553?$650_519_PNG$",
         description:"La tablet más potente de Samsung con pantalla Dynamic AMOLED 2X, procesador Snapdragon 8 Gen 2 y S Pen incluido.",
         features:["Pantalla Dynamic AMOLED 2X de 14.6 pulgadas", "Procesador Snapdragon 8 Gen 2", "S Pen incluido", "Cuerpo de Armor Aluminum"],
         pros:["Pantalla gigante y de alta calidad", "S Pen incluido en el precio", "Rendimiento de alto nivel", "Software con modo DeX para PC"],
         cons:["Muy grande, difícil de usar con una sola mano", "Ecosistema de aplicaciones limitado comparado con iPadOS", "Precio muy elevado"],
         recommendations:{ingenieria:"Ideal para la visualización de planos y documentos.",disenografico:"La mejor opción para el diseño gráfico en Android.",medicina:"Perfecta para la consulta de bases de datos médicas.",audiovisual:"La gran pantalla es ideal para la edición de video."},
         buyLinks:[
            {name: "Samsung Store", url:"https://www.samsung.com/es/tablets/galaxy-tab-s/galaxy-tab-s9-ultra/", store:"original"},
            {name: "Amazon", url:"https://www.amazon.es/Samsung-Galaxy-Tab-S9-Ultra/dp/B0C825W5Y6", store:"amazon"}
         ]
        },
        {id:23, name:"Xiaomi Pad 6", price:399, category:"tablets", rating:4.3,
         image:"https://i01.appmifile.com/webfile/globalimg/products/pc/xiaomi-pad-6/specs-header.png",
         description:"Tablet Android con excelente relación calidad-precio, ideal para estudiantes y consumo multimedia.",
         features:["Snapdragon 870", "8 GB RAM", "256 GB almacenamiento", "Pantalla 2.8K de 11 pulgadas", "Lápiz óptico compatible"],
         pros:["Excelente relación calidad-precio", "Pantalla de alta resolución", "Rendimiento fluido", "Batería de larga duración"],
         cons:["Lápiz no incluido", "No tiene modo desktop como Samsung DeX", "Materiales no premium"],
         recommendations:{estudiante:"Perfecta para estudiantes que necesitan una tablet asequible.",medicina:"Buena para consultar documentos y tomar notas básicas.",marketing:"Suficiente para gestión de redes sociales y contenido básico."},
         buyLinks:[
            {name: "Xiaomi Store", url:"https://www.mi.com/es/product/xiaomi-pad-6/", store:"original"},
            {name: "Amazon", url:"https://www.amazon.es/Xiaomi-Pantalla-Almacenamiento-Procesador-Adaptativa/dp/B0C5JYJYJY", store:"amazon"}
         ]
        },
        
        // --- ACCESORIOS ---
        {id:11, name:"Logitech MX Master 3S", price:109, category:"accesorios", rating:4.8,
         image:"https://resource.logitech.com/w_800,c_limit,q_auto,f_auto,dpr_2.0/d_transparent.gif/content/dam/logitech/en/products/mice/mx-master-3s-graphite/gallery/mx-master-3s-top-view-graphite.png?v=1",
         description:"Un ratón ergonómico diseñado para la productividad y el confort. Sus botones programables mejoran el flujo de trabajo.",
         features:["Rueda de desplazamiento MagSpeed", "Diseño ergonómico para largas jornadas", "Botones personalizables", "Conectividad multi-dispositivo"],
         pros:["Comodidad excepcional", "Personalización avanzada de botones", "Rueda de desplazamiento de alta velocidad"],
         cons:["Precio elevado para un ratón", "No es ambidiestro", "No es el mejor para gaming"],
         recommendations:{ingenieria:"Indispensable para el uso de software de diseño asistido por ordenador.",disenografico:"La mejor herramienta para un trabajo preciso en programas de diseño.",medicina:"Ideal para la navegación por documentos extensos.",programacion:"Aumenta la productividad en la navegación de código.",marketing:"Mejora la eficiencia en la gestión de proyectos.",audiovisual:"Facilita la edición en la línea de tiempo."},
         buyLinks:[
            {name: "Logitech Store", url:"https://www.logitech.com/es-es/products/mice/mx-master-3s.html", store:"original"},
            {name: "Amazon", url:"https://www.amazon.es/Logitech-MX-Master-3S-Bluetooth/dp/B09V7N8W47", store:"amazon"},
            {name: "Back Market", url:"https://www.backmarket.es/es-es/search?q=logitech%20mx%20master%203", store:"backmarket"}
         ]
        },
        {id:12, name:"Auriculares Sony WH-1000XM5", price:349, category:"accesorios", rating:4.9,
         image:"https://www.sony.es/image/966b9658e46955a15320577a796e625d?fmt=png-alpha&wid=800",
         description:"La última generación de los auriculares de cancelación de ruido de Sony. Un sonido excepcional y una comodidad inigualable.",
         features:["Cancelación de ruido líder del sector", "30 horas de batería", "Llamadas nítidas", "Diseño ultraligero y plegable"],
         pros:["La mejor cancelación de ruido del mercado", "Sonido de alta fidelidad", "Cómodos para uso prolongado", "Gran autonomía"],
         cons:["Precio elevado", "No son plegables del todo", "No son los mejores para hacer ejercicio"],
         recommendations:{ingenieria:"Indispensables para concentrarse en entornos ruidosos.",disenografico:"Perfectos para trabajar con música.",medicina:"Una excelente herramienta para estudiar.",programacion:"Ayudan a mantener la concentración.",audiovisual:"Esenciales para monitorizar audio."},
         buyLinks:[
            {name: "Sony Store", url:"https://www.sony.es/electronics/auriculares-diademas/wh-1000xm5", store:"original"},
            {name: "El Corte Inglés", url:"https://www.elcorteingles.es/electronica/A46830567-apple-iphone-14-128-gb/", store:"elcorteingles"},
            {name: "MediaMarkt", url:"https://www.mediamarkt.es/es/product/_sony-wh-1000xm5", store:"mediamarkt"}
         ]
        },
        {id:13, name:"Monitor Samsung Odyssey G9", price:1199, category:"accesorios", rating:4.7,
         image:"https://images.samsung.com/is/image/samsung/p6pim/es/lc49g95tsslxce/gallery/es-odyssey-g9-lc49g95tsslxce-361099-lc49g95tsslxce-532296144?$650_519_PNG$",
         description:"Un monitor curvo ultra-ancho de 49 pulgadas, ideal para la multitarea extrema.",
         features:["49 pulgadas, curvo", "Resolución 5120 x 1440 (Dual QHD)", "Tasa de refresco de 240 Hz", "Tiempo de respuesta de 1 ms"],
         pros:["Multitarea extrema en una sola pantalla", "Inmersión total para juegos y trabajo", "Alta resolución y tasa de refresco"],
         cons:["Muy grande, requiere mucho espacio", "Precio muy elevado", "No es útil para todos los usuarios"],
         recommendations:{ingenieria:"La mejor herramienta para la visualización de planos.",disenografico:"Ideal para la edición de vídeo en una línea de tiempo amplia.",programacion:"El monitor definitivo para la programación.",audiovisual:"Ideal para la edición de vídeo y el diseño de sonido."},
         buyLinks:[
            {name: "Samsung Store", url:"https://www.samsung.com/es/monitors/gaming/odyssey-g9-g95t-49-inch-curved-lc49g95tsslxce/", store:"original"},
            {name: "PC Componentes", url:"https://www.pccomponentes.com/samsung-odyssey-g9", store:"pccomponentes"}
         ]
        },
        {id:14, name:"Teclado mecánico Keychron K2", price:99, category:"accesorios", rating:4.5,
         image:"https://cdn.shopify.com/s/files/1/0059/0630/1017/files/K2-Hot-swappable-RGB-with-Aluminum-frame-1_1024x1024.jpg",
         description:"Un teclado mecánico compacto con diseño para Mac y Windows. Ideal para programadores y escritores.",
         features:["Switches Gateron intercambiables", "Conexión inalámbrica y USB-C", "Diseño compacto del 75%", "RGB retroiluminado"],
         pros:["Experiencia de escritura muy satisfactoria", "Diseño compacto y robusto", "Conectividad versátil"],
         cons:["Puede ser ruidoso", "No es para todo el mundo", "Requiere acostumbrarse al formato compacto"],
         recommendations:{programacion:"Excelente para largas sesiones de codificación.",escritor:"Ideal para la escritura de guiones y artículos.",marketing:"Perfecto para el día a día."},
         buyLinks:[
            {name: "Keychron Store", url:"https://www.keychron.com/products/keychron-k2-wireless-mechanical-keyboard", store:"original"},
            {name: "Amazon", url:"https://www.amazon.es/Keychron-K2-Teclado-Mec%C3%A1nico/dp/B08J3B8R2D", store:"amazon"}
         ]
        },
        {id:15, name:"Logitech StreamCam", price:160, category:"accesorios", rating:4.3,
         image:"https://resource.logitech.com/w_800,c_limit,q_auto,f_auto,dpr_2.0/d_transparent.gif/content/dam/logitech/en/products/webcams/streamcam/gallery/streamcam-black-gallery.png?v=1",
         description:"Webcam Full HD 1080p a 60 fps. Ideal para creadores de contenido, streamers y profesionales.",
         features:["Full HD 1080p a 60 fps", "Enfoque automático con IA", "Soporte para trípode", "Conexión USB-C"],
         pros:["Alta calidad de imagen a 60fps", "Enfoque automático rápido y preciso", "Diseño versátil"],
         cons:["Precio elevado", "No graba en 4K", "El software de Logitech podría ser mejor"],
         recommendations:{marketing:"Indispensable para videollamadas de alta calidad.",audiovisual:"Una webcam de alta calidad para streamers.",medicina:"Perfecta para teleconsultas."},
         buyLinks:[
            {name: "Logitech Store", url:"https://www.logitech.com/es-es/products/webcams/streamcam.html", store:"original"},
            {name: "PC Componentes", url:"https://www.pccomponentes.com/logitech-streamcam", store:"pccomponentes"},
            {name: "MediaMarkt", url:"https://www.mediamarkt.es/es/product/_logitech-streamcam-webcam", store:"mediamarkt"}
         ]
        },
        {id:16, name:"Placa de sonido Focusrite Scarlett 2i2", price:180, category:"accesorios", rating:4.7,
         image:"https://global.focusrite.com/sites/focusrite/files/styles/product_gallery_thumbnail/public/scarlett_2i2_1.jpg",
         description:"Interfaz de audio compacta para grabación de música. Esencial para músicos y podcasters.",
         features:["2 entradas de micrófono/instrumento", "Preamplificadores de micrófono Scarlett", "Grabación de alta calidad 24-bit/192kHz", "Conexión USB-C"],
         pros:["Calidad de sonido profesional", "Fácil de usar", "Construcción robusta", "Incluye software de producción musical"],
         cons:["Puede ser complicado para principiantes", "Solo 2 entradas"],
         recommendations:{musico:"Un accesorio fundamental para grabar voces e instrumentos.",audiovisual:"Ideal para la grabación de podcasts y locuciones."},
         buyLinks:[
            {name: "Focusrite Store", url:"https://focusrite.com/es/usb-audio-interfaces/scarlett/scarlett-2i2", store:"original"},
            {name: "Thomann", url:"https://www.thomann.de/es/focusrite_scarlett_2i2_4th_gen.htm", store:"thomann"}
         ]
        },
        {id:20, name:"Teclado Logitech K380", price:50, category:"accesorios", rating:4.4,
         image:"https://resource.logitech.com/w_800,c_limit,q_auto,f_auto,dpr_2.0/d_transparent.gif/content/dam/logitech/en/products/keyboards/k380-multi-device-bluetooth-keyboard/gallery/k380-rose-gallery-01.png?v=1",
         description:"Teclado inalámbrico compacto y minimalista que se conecta a tres dispositivos a la vez.",
         features:["Conexión Bluetooth a 3 dispositivos", "Diseño compacto y ligero", "Compatible con iOS, Android, Mac y Windows"],
         pros:["Muy versátil y fácil de transportar", "Económico", "Larga duración de batería"],
         cons:["No es el mejor para escribir por largos periodos", "Las teclas son redondas y pueden no gustar a todo el mundo"],
         recommendations:{estudiante:"El accesorio perfecto para estudiar en la biblioteca.",marketing:"Genial para trabajar en movilidad con una tablet.",musico:"Útil para controlar el software de música."},
         buyLinks:[
            {name: "Amazon", url:"https://www.amazon.es/Logitech-K380-Teclado-Bluetooth/dp/B0852P8942", store:"amazon"},
            {name: "MediaMarkt", url:"https://www.mediamarkt.es/es/product/_logitech-k380-teclado-bluetooth", store:"mediamarkt"}
         ]
        },
        {id:24, name:"Disco Duro Externo WD My Passport", price:89, category:"accesorios", rating:4.6,
         image:"https://www.westerndigital.com/content/dam/store/en-us/assets/products/internal-storage/wd-my-passport-usb-3-2-1-tb/gallery/wd-my-passport-usb-3-2-1-tb-black-1.png",
         description:"Disco duro externo portátil con gran capacidad y seguridad de datos.",
         features:["1 TB de capacidad", "USB 3.2 Gen 1", "Cifrado AES de 256 bits", "Diseño compacto y resistente"],
         pros:["Gran capacidad en formato pequeño", "Seguridad de datos con cifrado", "Resistente a golpes"],
         cons:["Velocidades no son las más rápidas", "Requiere software para el cifrado"],
         recommendations:{estudiante:"Ideal para hacer copias de seguridad de trabajos.",ingenieria:"Perfecto para transportar grandes archivos de proyectos.",medicina:"Buena opción para almacenar documentos médicos."},
         buyLinks:[
            {name: "WD Store", url:"https://shop.westerndigital.com/products/portable-drives/wd-my-passport-usb-3-2-1tb", store:"original"},
            {name: "Amazon", url:"https://www.amazon.es/Western-Digital-Passport-Port%C3%A1til-Externo/dp/B07X41PWTY", store:"amazon"}
         ]
        }
    ];

    // Perfiles y subperfiles
    const profiles = {
        'ingenieria': {
            name: 'Ingeniería',
            icon: 'fa-calculator',
            subprofiles: [
                {id: 'ingenieria_software', name: 'Ingeniería de Software'},
                {id: 'ingenieria_mecanica', name: 'Ingeniería Mecánica'},
                {id: 'ingenieria_civil', name: 'Ingeniería Civil'},
                {id: 'ingenieria_aeroespacial', name: 'Ingeniería Aeroespacial'}
            ]
        },
        'disenografico': {
            name: 'Diseño Gráfico',
            icon: 'fa-paint-brush',
            subprofiles: [
                {id: 'disenografico_2d', name: 'Diseño 2D e Ilustración'},
                {id: 'disenografico_3d', name: 'Diseño 3D y Motion Graphics'}
            ]
        },
        'medicina': {
            name: 'Medicina',
            icon: 'fa-user-md',
            subprofiles: [
                {id: 'medicina_estudiante', name: 'Estudiante de Medicina'},
                {id: 'medicina_profesional', name: 'Profesional Sanitario'}
            ]
        },
        'programacion': {
            name: 'Programación',
            icon: 'fa-code',
            subprofiles: [
                {id: 'programacion_web', name: 'Desarrollo Web'},
                {id: 'programacion_movil', name: 'Desarrollo Móvil'},
                {id: 'programacion_ia', name: 'Data Science / IA'}
            ]
        },
        'marketing': {
            name: 'Marketing Digital',
            icon: 'fa-bullhorn',
            subprofiles: [
                {id: 'marketing_redes', name: 'Redes Sociales y SEO'},
                {id: 'marketing_analisis', name: 'Análisis de Datos'}
            ]
        },
        'audiovisual': {
            name: 'Producción Audiovisual',
            icon: 'fa-film',
            subprofiles: [
                {id: 'audiovisual_video', name: 'Edición de Video'},
                {id: 'audiovisual_foto', name: 'Fotografía'}
            ]
        },
        'escritor': {
            name: 'Escritor',
            icon: 'fa-pen',
            subprofiles: [
                {id: 'escritor_guionista', name: 'Guionista'},
                {id: 'escritor_blog', name: 'Blogger / Articulista'}
            ]
        },
        'musico': {
            name: 'Músico',
            icon: 'fa-music',
            subprofiles: [
                {id: 'musico_productor', name: 'Productor Musical'},
                {id: 'musico_dj', name: 'DJ'}
            ]
        },
        'estudiante': {
            name: 'Estudiante',
            icon: 'fa-graduation-cap',
            subprofiles: [
                {id: 'estudiante_universitario', name: 'Universitario'},
                {id: 'estudiante_secundaria', name: 'Secundaria/Bachillerato'}
            ]
        }
    };
    
    // Datos de comentarios (inicialmente vacío, se llenará con comentarios reales de usuarios)
    const commentsData = {};
    
    // Variables de estado
    const allProducts = products;
    let currentProfile = null;
    let currentCategory = 'all';
    let compareList = [];
    let currentCommentFilter = 'all';
    let cookiesAccepted = false;
    
    // Generar perfiles dinámicamente
    function generateProfiles() {
        const profileSelector = document.querySelector('.profile-selector');
        const profileDropdown = document.getElementById('profileDropdown');
        profileSelector.innerHTML = '';
        profileDropdown.innerHTML = '';

        for (const key in profiles) {
            const profile = profiles[key];
            
            // Tarjeta de perfil principal
            const card = document.createElement("div");
            card.classList.add("profile-card");
            card.setAttribute('onclick', `setProfile('${key}', '${profile.name}')`);
            card.innerHTML = `
                <h3><i class="fas ${profile.icon}"></i> ${profile.name}</h3>
                <p>${profile.subprofiles.length} especializaciones</p>
            `;
            profileSelector.appendChild(card);
            
            // Enlace principal en dropdown
            const mainLink = document.createElement("a");
            mainLink.innerHTML = `<i class="fas ${profile.icon}"></i> ${profile.name}`;
            mainLink.classList.add('dropdown-main-link');
            mainLink.setAttribute('onclick', `setProfile('${key}', '${profile.name}')`);
            profileDropdown.appendChild(mainLink);

            // Subperfiles
            profile.subprofiles.forEach(sub => {
                const subLink = document.createElement("a");
                subLink.innerHTML = `<i class="fas fa-chevron-right"></i> ${sub.name}`;
                subLink.classList.add('dropdown-sub-link');
                subLink.setAttribute('onclick', `setProfile('${sub.id}', '${profile.name} > ${sub.name}')`);
                profileDropdown.appendChild(subLink);
            });
        }
    }

    // Alternar sección (acordeón)
    function toggleSection(sectionId) {
        const section = document.getElementById(sectionId);
        const header = section.querySelector('.section-header');
        const container = section.querySelector('.products-container');
        const toggle = section.querySelector('.section-toggle');
        
        header.classList.toggle('active');
        if (header.classList.contains('active')) {
            container.style.maxHeight = container.scrollHeight + 'px';
        } else {
            container.style.maxHeight = '0';
        }
    }

    // Abrir el menú lateral
    function openMenu() {
        document.getElementById("sidebar").classList.add('open');
    }

    // Cerrar el menú lateral
    function closeMenu() {
        document.getElementById("sidebar").classList.remove('open');
    }

    // Renderizar rating en estrellas
    function renderRating(rating) {
        let stars = '';
        const fullStars = Math.floor(rating);
        const hasHalfStar = rating % 1 >= 0.5;
        
        for (let i = 0; i < 5; i++) {
            if (i < fullStars) {
                stars += '★';
            } else if (i === fullStars && hasHalfStar) {
                stars += '½';
            } else {
                stars += '☆';
            }
        }
        return stars;
    }

    // Renderizar productos en el DOM
    function renderProducts(productsToRender) {
        document.querySelectorAll('.products-grid').forEach(grid => grid.innerHTML = '');

        productsToRender.forEach((prod, index) => {
            const card = document.createElement("div");
            card.classList.add("product-card");
            card.innerHTML = `
                <input type="checkbox" class="compare-checkbox" id="compare-${prod.id}" onchange="toggleCompare(${prod.id})">
                <label for="compare-${prod.id}" class="compare-label"></label>
                <img src="${prod.image}" alt="${prod.name}" onerror="this.src='https://via.placeholder.com/300x200?text=Imagen+no+disponible'" />
                <div class="info">
                    <h4>${prod.name}</h4>
                    <div class="price">${prod.price} €</div>
                    <div class="rating">${renderRating(prod.rating)} (${prod.rating.toFixed(1)})</div>
                    <span class="category">${prod.category.charAt(0).toUpperCase() + prod.category.slice(1)}</span>
                </div>
            `;
            
            // Animación de aparición escalonada
            setTimeout(() => {
                card.style.opacity = 1;
                card.style.transform = 'translateY(0)';
            }, index * 100);

            card.addEventListener("click", () => openProduct(prod.id));

            const grid = document.querySelector(`.products-grid[data-category="${prod.category}"]`);
            if (grid) {
                grid.appendChild(card);
            }
        });
        
        // Actualizar estado de checkboxes de comparación
        updateCompareCheckboxes();
    }
    
    // Aplicar filtros
    function applyFilters() {
        const minPrice = parseFloat(document.getElementById("minPrice").value) || 0;
        const maxPrice = parseFloat(document.getElementById("maxPrice").value) || Infinity;
        const searchText = document.getElementById("searchText").value.toLowerCase().trim();
        const sortBy = document.getElementById("sortBy").value;

        let filteredProducts = allProducts;
        
        // Filtrar por perfil
        if (currentProfile) {
            filteredProducts = filteredProducts.filter(p => {
                const mainProfile = currentProfile.split('_')[0];
                return p.recommendations[mainProfile] || p.recommendations[currentProfile];
            });
        }
        
        // Filtrar por categoría
        if (currentCategory !== 'all') {
            filteredProducts = filteredProducts.filter(p => p.category === currentCategory);
        }
        
        // Filtrar por precio
        filteredProducts = filteredProducts.filter(p => p.price >= minPrice && p.price <= maxPrice);
        
        // Filtrar por texto de búsqueda
        filteredProducts = filteredProducts.filter(p => 
            p.name.toLowerCase().includes(searchText) || 
            p.description.toLowerCase().includes(searchText) ||
            p.category.toLowerCase().includes(searchText)
        );
        
        // Ordenar
        switch(sortBy) {
            case 'price_asc':
                filteredProducts.sort((a, b) => a.price - b.price);
                break;
            case 'price_desc':
                filteredProducts.sort((a, b) => b.price - a.price);
                break;
            case 'name_asc':
                filteredProducts.sort((a, b) => a.name.localeCompare(b.name));
                break;
            case 'name_desc':
                filteredProducts.sort((a, b) => b.name.localeCompare(a.name));
                break;
            case 'rating_desc':
                filteredProducts.sort((a, b) => b.rating - a.rating);
                break;
        }
        
        renderProducts(filteredProducts);
        closeMenu();
    }

    // Event listeners para los filtros
    document.getElementById("searchText").addEventListener("keypress", function(e) {
        if (e.key === "Enter") {
            applyFilters();
        }
    });

    // Establecer categoría
    function setCategory(cat) {
        currentCategory = cat;
        document.querySelectorAll('.profile-card').forEach(card => card.classList.remove('active'));
        currentProfile = null;
        applyFilters();
        
        // Desplazarse a la categoría si no es 'all'
        if (cat !== 'all') {
            const section = document.getElementById(cat);
            if (section) {
                window.scrollTo({
                    top: section.offsetTop - 100,
                    behavior: 'smooth'
                });
            }
        } else {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    }

    // Filtrar productos por perfil
    function setProfile(profileKey, profileName = null) {
        currentProfile = profileKey;
        
        // Resaltar tarjeta de perfil activa
        document.querySelectorAll('.profile-card').forEach(card => card.classList.remove('active'));
        if (profileName) {
            const activeCards = document.querySelectorAll(`.profile-card h3`);
            activeCards.forEach(card => {
                if (card.textContent.includes(profileName.split(' > ')[0])) {
                    card.parentElement.classList.add('active');
                }
            });
        }
        
        applyFilters();
        closeMenu();
    }

    // Abrir modal de producto
    function openProduct(id) {
        const prod = allProducts.find(p => p.id === id);
        if (!prod) return;

        document.getElementById("modalTitle").textContent = prod.name;
        document.getElementById("modalPrice").textContent = `${prod.price} €`;
        document.getElementById("modalImage").src = prod.image;
        document.getElementById("modalImage").onerror = function() {
            this.src = 'https://via.placeholder.com/400x300?text=Imagen+no+disponible';
        };
        document.getElementById("modalDescription").textContent = prod.description;
        
        // Características
        const featuresList = document.getElementById("modalFeaturesList");
        featuresList.innerHTML = prod.features.map(f => `<li>${f}</li>`).join('');
        
        // Pros y contras
        const prosList = document.getElementById("modalProsList");
        prosList.innerHTML = prod.pros.map(p => `<li>${p}</li>`).join('');
        
        const consList = document.getElementById("modalConsList");
        consList.innerHTML = prod.cons.map(c => `<li>${c}</li>`).join('');
        
        // Recomendaciones
        const recommendationsTitle = document.getElementById("profileRecommendationTitle");
        const recommendationsText = document.getElementById("modalRecommendationsText");
        
        let recommendationFound = false;
        if (currentProfile && prod.recommendations[currentProfile]) {
            recommendationsTitle.textContent = `Recomendación específica para tu perfil:`;
            recommendationsText.textContent = prod.recommendations[currentProfile];
            recommendationFound = true;
        } else if (currentProfile && prod.recommendations[currentProfile.split('_')[0]]) {
            recommendationsTitle.textContent = `Recomendación general para tu área:`;
            recommendationsText.textContent = prod.recommendations[currentProfile.split('_')[0]];
            recommendationFound = true;
        }
        
        if (!recommendationFound) {
            recommendationsTitle.textContent = "Recomendaciones generales:";
            let recs = "";
            for (const profileKey in prod.recommendations) {
                let profileName = profileKey.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                recs += `<strong>${profileName}:</strong> ${prod.recommendations[profileKey]}<br><br>`;
            }
            recommendationsText.innerHTML = recs || "No hay una recomendación específica para este producto.";
        }
        
        // Opciones de compra
        const buyLinksContainer = document.getElementById("buyLinks");
        buyLinksContainer.innerHTML = '<h3><i class="fas fa-shopping-cart"></i> Opciones de compra</h3>';
        prod.buyLinks.forEach(link => {
            const a = document.createElement("a");
            a.href = link.url;
            a.target = "_blank";
            a.classList.add('buy-link', link.store);
            a.innerHTML = `<i class="fas fa-external-link-alt"></i> ${link.name}`;
            buyLinksContainer.appendChild(a);
        });
        
        // Cargar comentarios
        loadComments(prod.id);
        
        // Mostrar modal
        document.getElementById("productModal").style.display = "flex";
        document.getElementById("commentForm").dataset.productId = id;
        
        // Añadir al historial de navegación
        history.pushState({productId: id}, '', `#product-${id}`);
    }

    // Cerrar modal
    function closeModal() {
        document.getElementById("productModal").style.display = "none";
        history.replaceState(null, '', window.location.pathname);
    }

    // Cargar comentarios
    function loadComments(productId) {
        const commentsList = document.getElementById("commentsList");
        const ratingOverview = document.getElementById("ratingOverview");
        const commentsFilters = document.getElementById("commentsFilters");
        commentsList.innerHTML = "";
        
        // Verificar si hay comentarios para este producto
        if (!commentsData[productId] || commentsData[productId].length === 0) {
            commentsList.innerHTML = '<p>No hay comentarios todavía. ¡Sé el primero en opinar sobre este producto!</p>';
            ratingOverview.innerHTML = `
                <div class="average-rating">
                    <div class="average-rating-value">0.0</div>
                    <div class="average-rating-stars">☆☆☆☆☆</div>
                    <div class="average-rating-count">0 valoraciones</div>
                </div>
                <div class="rating-distribution">
                    ${[5, 4, 3, 2, 1].map(stars => `
                        <div class="rating-bar">
                            <div class="rating-label">${stars} estrellas</div>
                            <div class="rating-bar-container">
                                <div class="rating-bar-fill" style="width: 0%"></div>
                            </div>
                            <div class="rating-percentage">0%</div>
                        </div>
                    `).join('')}
                </div>
            `;
            commentsFilters.innerHTML = '';
            document.getElementById("commentCount").textContent = '0';
            return;
        }
        
        const productComments = commentsData[productId];
        let totalRating = 0;
        let commentCount = productComments.length;
        let ratingDistribution = [0, 0, 0, 0, 0]; // Para 1-5 estrellas
        
        // Calcular estadísticas
        productComments.forEach(c => {
            totalRating += c.rating;
            ratingDistribution[5 - c.rating]++; // Invertir índice para 5 estrellas primero
        });
        
        const averageRating = commentCount > 0 ? (totalRating / commentCount).toFixed(1) : 0;
        
        // Renderizar resumen de valoraciones
        ratingOverview.innerHTML = `
            <div class="average-rating">
                <div class="average-rating-value">${averageRating}</div>
                <div class="average-rating-stars">${renderRating(averageRating)}</div>
                <div class="average-rating-count">${commentCount} valoraciones</div>
            </div>
            <div class="rating-distribution">
                ${[5, 4, 3, 2, 1].map((stars, i) => {
                    const count = ratingDistribution[i];
                    const percentage = commentCount > 0 ? Math.round((count / commentCount) * 100) : 0;
                    return `
                        <div class="rating-bar">
                            <div class="rating-label">${stars} estrellas</div>
                            <div class="rating-bar-container">
                                <div class="rating-bar-fill" style="width: ${percentage}%"></div>
                            </div>
                            <div class="rating-percentage">${percentage}%</div>
                        </div>
                    `;
                }).join('')}
            </div>
        `;
        
        // Filtros de comentarios
        commentsFilters.innerHTML = `
            <div class="comments-filter ${currentCommentFilter === 'all' ? 'active' : ''}" onclick="filterComments('all')">Todos (${commentCount})</div>
            <div class="comments-filter ${currentCommentFilter === 'positive' ? 'active' : ''}" onclick="filterComments('positive')">Positivos</div>
            <div class="comments-filter ${currentCommentFilter === 'neutral' ? 'active' : ''}" onclick="filterComments('neutral')">Neutrales</div>
            <div class="comments-filter ${currentCommentFilter === 'negative' ? 'active' : ''}" onclick="filterComments('negative')">Negativos</div>
        `;
        
        // Filtrar comentarios según selección
        const filteredComments = currentCommentFilter === 'all' ? productComments : 
            productComments.filter(c => 
                (currentCommentFilter === 'positive' && c.sentiment === 'positive') ||
                (currentCommentFilter === 'neutral' && c.sentiment === 'neutral') ||
                (currentCommentFilter === 'negative' && c.sentiment === 'negative')
            );
        
        // Renderizar comentarios
        if (filteredComments.length > 0) {
            filteredComments.forEach(c => {
                const div = document.createElement("div");
                div.classList.add("comment-item", `sentiment-${c.sentiment}`);
                div.innerHTML = `
                    <div class="comment-header">
                        <div class="comment-author">${c.name}</div>
                        <div class="comment-date">${c.date}</div>
                    </div>
                    <div class="comment-rating">${renderRating(c.rating)}</div>
                    <div class="comment-text">${c.text}</div>
                `;
                commentsList.appendChild(div);
            });
        } else {
            commentsList.innerHTML = '<p>No hay comentarios que coincidan con los filtros seleccionados.</p>';
        }
        
        document.getElementById("commentCount").textContent = filteredComments.length;
        
        // Actualizar rating en el modal
        const modalRating = document.getElementById("modalRating");
        modalRating.innerHTML = renderRating(averageRating);
    }
    
    // Filtrar comentarios
    function filterComments(filter) {
        currentCommentFilter = filter;
        const productId = document.getElementById("commentForm").dataset.productId;
        loadComments(parseInt(productId));
    }
    
    // Enviar comentario
    document.getElementById("commentForm").addEventListener("submit", function(e) {
        e.preventDefault();
        const id = parseInt(this.dataset.productId);
        const name = document.getElementById("commentName").value.trim();
        const text = document.getElementById("commentText").value.trim();
        const ratingInput = document.querySelector('input[name="rating"]:checked');
        const rating = ratingInput ? parseInt(ratingInput.value) : 0;
        
        if (!name || !text || rating === 0) {
            alert("Por favor, completa todos los campos para enviar tu valoración.");
            return;
        }
        
        // Analizar sentimiento básico (simulado)
        const sentiment = rating >= 4 ? 'positive' : rating === 3 ? 'neutral' : 'negative';
        
        if (!commentsData[id]) commentsData[id] = [];
        commentsData[id].push({ 
            name, 
            text, 
            rating, 
            date: new Date().toISOString().split('T')[0], 
            sentiment 
        });
        
        this.reset();
        loadComments(id);
        alert("¡Gracias por tu valoración!");
    });
    
    // Comparar productos
    function toggleCompare(productId) {
        const index = compareList.indexOf(productId);
        if (index === -1) {
            compareList.push(productId);
        } else {
            compareList.splice(index, 1);
        }
        
        updateCompareBar();
        updateCompareCheckboxes();
    }
    
    // Actualizar barra de comparación
    function updateCompareBar() {
        const compareItems = document.getElementById("compareItems");
        const compareButton = document.getElementById("compareButton");
        const compareCount = document.getElementById("compareCount");
        
        compareItems.innerHTML = '';
        compareList.forEach(id => {
            const product = allProducts.find(p => p.id === id);
            if (product) {
                const item = document.createElement("div");
                item.classList.add("compare-item");
                item.innerHTML = `
                    ${product.name}
                    <button onclick="removeFromCompare(${id})">&times;</button>
                `;
                compareItems.appendChild(item);
            }
        });
        
        compareButton.disabled = compareList.length < 2;
        compareCount.textContent = compareList.length;
        
        // Mostrar/ocultar barra
        const compareBar = document.getElementById("compareBar");
        compareBar.classList.toggle("visible", compareList.length > 0);
    }
    
    // Actualizar checkboxes de comparación
    function updateCompareCheckboxes() {
        document.querySelectorAll('.compare-checkbox').forEach(checkbox => {
            const productId = parseInt(checkbox.id.split('-')[1]);
            checkbox.checked = compareList.includes(productId);
        });
    }
    
    // Eliminar producto de la comparación
    function removeFromCompare(productId) {
        compareList = compareList.filter(id => id !== productId);
        updateCompareBar();
        updateCompareCheckboxes();
    }
    
    // Limpiar comparación
    function clearCompare() {
        compareList = [];
        updateCompareBar();
        updateCompareCheckboxes();
    }
    
    // Abrir modal de comparación
    function openCompareModal() {
        if (compareList.length < 2) return;
        
        const compareTableContainer = document.getElementById("compareTableContainer");
        const productsToCompare = compareList.map(id => allProducts.find(p => p.id === id));
        
        // Encontrar el "ganador" en cada categoría (simulado)
        const winners = {
            price: productsToCompare.reduce((min, p) => p.price < min.price ? p : min, productsToCompare[0]).id,
            rating: productsToCompare.reduce((max, p) => p.rating > max.rating ? p : max, productsToCompare[0]).id
        };
        
        // Generar tabla de comparación
        compareTableContainer.innerHTML = `
            <table class="compare-table">
                <thead>
                    <tr>
                        <th>Característica</th>
                        ${productsToCompare.map(p => `<th>${p.name}</th>`).join('')}
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Imagen</td>
                        ${productsToCompare.map(p => `
                            <td class="compare-product-header ${winners.price === p.id ? 'compare-winner' : ''}">
                                <img src="${p.image}" alt="${p.name}" class="compare-product-image" onerror="this.src='https://via.placeholder.com/120x120?text=Imagen+no+disponible'">
                                <div class="compare-product-name">${p.name}</div>
                                <div class="compare-product-price">${p.price} €</div>
                            </td>
                        `).join('')}
                    </tr>
                    <tr>
                        <td>Precio</td>
                        ${productsToCompare.map(p => `
                            <td ${winners.price === p.id ? 'class="compare-winner"' : ''}>${p.price} €</td>
                        `).join('')}
                    </tr>
                    <tr>
                        <td>Valoración</td>
                        ${productsToCompare.map(p => `
                            <td ${winners.rating === p.id ? 'class="compare-winner"' : ''}>
                                ${renderRating(p.rating)} (${p.rating.toFixed(1)})
                            </td>
                        `).join('')}
                    </tr>
                    <tr>
                        <td>Categoría</td>
                        ${productsToCompare.map(p => `
                            <td>${p.category.charAt(0).toUpperCase() + p.category.slice(1)}</td>
                        `).join('')}
                    </tr>
                    <tr>
                        <td>Características</td>
                        ${productsToCompare.map(p => `
                            <td class="compare-feature-value">
                                <ul>
                                    ${p.features.map(f => `<li>${f}</li>`).join('')}
                                </ul>
                            </td>
                        `).join('')}
                    </tr>
                    <tr>
                        <td>Pros</td>
                        ${productsToCompare.map(p => `
                            <td class="compare-feature-value">
                                <ul>
                                    ${p.pros.map(pro => `<li>${pro}</li>`).join('')}
                                </ul>
                            </td>
                        `).join('')}
                    </tr>
                    <tr>
                        <td>Contras</td>
                        ${productsToCompare.map(p => `
                            <td class="compare-feature-value">
                                <ul>
                                    ${p.cons.map(con => `<li>${con}</li>`).join('')}
                                </ul>
                            </td>
                        `).join('')}
                    </tr>
                </tbody>
            </table>
        `;
        
        document.getElementById("compareModal").style.display = "flex";
    }
    
    // Cerrar modal de comparación
    function closeCompareModal() {
        document.getElementById("compareModal").style.display = "none";
    }
    
    // Resetear página
    function resetPage() {
        currentProfile = null;
        currentCategory = 'all';
        document.querySelectorAll('.profile-card').forEach(card => card.classList.remove('active'));
        document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
        document.getElementById("minPrice").value = "";
        document.getElementById("maxPrice").value = "";
        document.getElementById("searchText").value = "";
        document.getElementById("sortBy").value = "default";
        renderProducts(allProducts);
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    // Cargar producto desde URL hash
    function loadProductFromHash() {
        if (window.location.hash.startsWith('#product-')) {
            const productId = parseInt(window.location.hash.split('-')[1]);
            const product = allProducts.find(p => p.id === productId);
            if (product) {
                openProduct(productId);
            }
        } else if (window.location.hash === '#privacy-policy') {
            showPrivacyPolicy();
        } else if (window.location.hash === '#shipping-policy') {
            showShippingPolicy();
        }
    }
    
    // Mostrar política de privacidad
    function showPrivacyPolicy() {
        document.getElementById("mainContent").style.display = "none";
        document.getElementById("privacy-policy").style.display = "block";
        document.getElementById("shipping-policy").style.display = "none";
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    // Mostrar política de envíos
    function showShippingPolicy() {
        document.getElementById("mainContent").style.display = "none";
        document.getElementById("shipping-policy").style.display = "block";
        document.getElementById("privacy-policy").style.display = "none";
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    // Ocultar páginas de políticas
    function hidePolicyPage() {
        document.getElementById("mainContent").style.display = "block";
        document.getElementById("privacy-policy").style.display = "none";
        document.getElementById("shipping-policy").style.display = "none";
        history.replaceState(null, '', window.location.pathname);
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    // Manejar cookies
    function checkCookies() {
        if (localStorage.getItem('cookiesAccepted') === 'true') {
            cookiesAccepted = true;
            document.getElementById('cookieConsent').style.display = 'none';
        } else if (localStorage.getItem('cookiesRejected') === 'true') {
            cookiesAccepted = false;
            document.getElementById('cookieConsent').style.display = 'none';
        } else {
            document.getElementById('cookieConsent').style.display = 'flex';
        }
    }
    
    function acceptCookies() {
        localStorage.setItem('cookiesAccepted', 'true');
        localStorage.removeItem('cookiesRejected');
        cookiesAccepted = true;
        document.getElementById('cookieConsent').style.display = 'none';
    }
    
    function rejectCookies() {
        localStorage.setItem('cookiesRejected', 'true');
        localStorage.removeItem('cookiesAccepted');
        cookiesAccepted = false;
        document.getElementById('cookieConsent').style.display = 'none';
    }

    // Inicialización al cargar la página
    document.addEventListener("DOMContentLoaded", () => {
        renderProducts(allProducts);
        generateProfiles();
        loadProductFromHash();
        checkCookies();
        
        // Abrir secciones por defecto
        document.querySelectorAll('.section-header').forEach(header => {
            header.classList.add('active');
            const container = header.nextElementSibling;
            container.style.maxHeight = container.scrollHeight + 'px';
        });
    });
    
    // Manejar cambios en el hash de la URL
    window.addEventListener('hashchange', loadProductFromHash);
</script>
</body>
</html>